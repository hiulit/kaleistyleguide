void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var a=/function\s([^(]{1,})\(/,b=a.exec(this.toString());return b&&b.length>1?b[1].trim():""}}),void 0===String.prototype.trimRight&&(String.prototype.trimRight=function(){return String(this).replace(/\s+$/,"")});var stylus=function(){function a(b){var c=a.resolve(b),d=a.modules[c];if(!d)throw new Error('failed to require "'+b+'"');return d.exports||(d.exports={},d.call(d.exports,d,d.exports,a.relative(c))),d.exports}var b="called-from = ()\n\nvendors = moz webkit o ms official\n\n// stringify the given arg\n\n-string(arg)\n  type(arg) + ' ' + arg\n\n// require a color\n\nrequire-color(color)\n  unless color is a 'color'\n    error('RGB or HSL value expected, got a ' + -string(color))\n\n// require a unit\n\nrequire-unit(n)\n  unless n is a 'unit'\n    error('unit expected, got a ' + -string(n))\n\n// require a string\n\nrequire-string(str)\n  unless str is a 'string' or str is a 'ident'\n    error('string expected, got a ' + -string(str))\n\n// Math functions\n\nabs(n) { math(n, 'abs') }\nmin(a, b) { a < b ? a : b }\nmax(a, b) { a > b ? a : b }\n\n// Trigonometrics\nPI = -math-prop('PI')\n\nradians-to-degrees(angle)\n  angle * (180 / PI)\n\ndegrees-to-radians(angle)\n  unit(angle * (PI / 180),'')\n\nsin(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'sin'), 9)\n\ncos(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'cos'), 9)\n\n// Rounding Math functions\n\nceil(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'ceil') / multiplier\n\nfloor(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'floor') / multiplier\n\nround(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'round') / multiplier\n\n// return the sum of the given numbers\n\nsum(nums)\n  sum = 0\n  sum += n for n in nums\n\n// return the average of the given numbers\n\navg(nums)\n  sum(nums) / length(nums)\n\n// return a unitless number, or pass through\n\nremove-unit(n)\n  if typeof(n) is 'unit'\n    unit(n, '')\n  else\n    n\n\n// convert a percent to a decimal, or pass through\n\npercent-to-decimal(n)\n  if unit(n) is '%'\n    remove-unit(n) / 100\n  else\n    n\n\n// check if n is an odd number\n\nodd(n)\n  1 == n % 2\n\n// check if n is an even number\n\neven(n)\n  0 == n % 2\n\n// check if color is light\n\nlight(color)\n  lightness(color) >= 50%\n\n// check if color is dark\n\ndark(color)\n  lightness(color) < 50%\n\n// desaturate color by amount\n\ndesaturate(color, amount)\n  adjust(color, 'saturation', - amount)\n\n// saturate color by amount\n\nsaturate(color = '', amount = 100%)\n  if color is a 'color'\n    adjust(color, 'saturation', amount)\n  else\n    unquote( 'saturate(' + color + ')' )\n\n// darken by the given amount\n\ndarken(color, amount)\n  adjust(color, 'lightness', - amount)\n\n// lighten by the given amount\n\nlighten(color, amount)\n  adjust(color, 'lightness', amount)\n\n// decrease opacity by amount\n\nfade-out(color, amount)\n  color - rgba(black, percent-to-decimal(amount))\n\n// increase opacity by amount\n\nfade-in(color, amount)\n  color + rgba(black, percent-to-decimal(amount))\n\n// spin hue by a given amount\n\nspin(color, amount)\n  color + unit(amount, deg)\n\n// mix two colors by a given amount\n\nmix(color1, color2, weight = 50%)\n  unless weight in 0..100\n    error('Weight must be between 0% and 100%')\n\n  if length(color1) == 2\n    weight = color1[0]\n    color1 = color1[1]\n\n  else if length(color2) == 2\n    weight = 100 - color2[0]\n    color2 = color2[1]\n\n  require-color(color1)\n  require-color(color2)\n\n  p = unit(weight / 100, '')\n  w = p * 2 - 1\n\n  a = alpha(color1) - alpha(color2)\n\n  w1 = (((w * a == -1) ? w : (w + a) / (1 + w * a)) + 1) / 2\n  w2 = 1 - w1\n\n  channels = (red(color1) red(color2)) (green(color1) green(color2)) (blue(color1) blue(color2))\n  rgb = ()\n\n  for pair in channels\n    push(rgb, floor(pair[0] * w1 + pair[1] * w2))\n\n  a1 = alpha(color1) * p\n  a2 = alpha(color2) * (1 - p)\n  alpha = a1 + a2\n\n  rgba(rgb[0], rgb[1], rgb[2], alpha)\n\n// invert colors, leave alpha intact\n\ninvert(color = '')\n  if color is a 'color'\n    rgba(#fff - color, alpha(color))\n  else\n    unquote( 'invert(' + color + ')' )\n\n// give complement of the given color\n\ncomplement( color )\n  spin( color, 180 )\n\n// give grayscale of the given color\n\ngrayscale( color = '' )\n  if color is a 'color'\n    desaturate( color, 100% )\n  else\n    unquote( 'grayscale(' + color + ')' )\n\n// mix the given color with white\n\ntint( color, percent )\n  mix( white, color, percent )\n\n// mix the given color with black\n\nshade( color, percent )\n  mix( black, color, percent )\n\n// return the last value in the given expr\n\nlast(expr)\n  expr[length(expr) - 1]\n\n// return keys in the given pairs or object\n\nkeys(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key in pairs\n      push(ret, key)\n  else\n    for pair in pairs\n      push(ret, pair[0]);\n  ret\n\n// return values in the given pairs or object\n\nvalues(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key, val in pairs\n      push(ret, val)\n  else\n    for pair in pairs\n      push(ret, pair[1]);\n  ret\n\n// join values with the given delimiter\n\njoin(delim, vals...)\n  buf = ''\n  vals = vals[0] if length(vals) == 1\n  for val, i in vals\n    buf += i ? delim + val : val\n\n// add a CSS rule to the containing block\n\n// - This definition allows add-property to be used as a mixin\n// - It has the same effect as interpolation but allows users\n//   to opt for a functional style\n\nadd-property-function = add-property\nadd-property(name, expr)\n  if mixin\n    {name} expr\n  else\n    add-property-function(name, expr)\n\nprefix-classes(prefix)\n  -prefix-classes(prefix, block)\n\n// Caching mixin, use inside your functions to enable caching by extending.\n\n$stylus_mixin_cache = {}\ncache()\n  $key = (current-media() or 'no-media') + '__' + called-from[0] + '__' + arguments\n  if $key in $stylus_mixin_cache\n    @extend {'$cache_placeholder_for_' + $stylus_mixin_cache[$key]}\n  else if 'cache' in called-from\n    {block}\n  else\n    $id = length($stylus_mixin_cache)\n\n    &,\n    /$cache_placeholder_for_{$id}\n      $stylus_mixin_cache[$key] = $id\n      {block}\n\n// Percentage function to convert a number, e.g. '.45', into a percentage, e.g. '45%'\n\npercentage(num)\n  return unit(num * 100, '%')\n\n// Returns the position of a `value` within a `list`\n\nindex(list, value)\n  for val, i in list\n    return i if val == value\n";return a.modules={},a.resolve=function(b){var c=b,d=b+".js",e=b+"/index.js";return a.modules[d]&&d||a.modules[e]&&e||c},a.register=function(b,c){a.modules[b]=c},a.relative=function(b){return function(c){if("."!=c[0])return a(c);var d=b.split("/"),e=c.split("/");d.pop();for(var f=0;f<e.length;f++){var g=e[f];".."==g?d.pop():"."!=g&&d.push(g)}return a(d.join("/"))}},a.register("path.js",function(a,b,c){function e(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."==e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}var d=!1,f=/^([\s\S]+\/(?!$)|\/)?((?:[\s\S]+?)?(\.[^.]*)?)$/;b.normalize=function(a){var b="/"===a.charAt(0),c="/"===a.slice(-1);return a=e(a.split("/").filter(function(a){return!!a}),!b).join("/"),a||b||(a="."),a&&c&&(a+="/"),(b?"/":"")+a},b.join=function(){var a=Array.prototype.slice.call(arguments,0);return b.normalize(a.filter(function(a,b){return a&&"string"==typeof a}).join("/"))},b.relative=function(a,c){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=b.resolve(a).substr(1),c=b.resolve(c).substr(1);for(var e=d(a.split("/")),f=d(c.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},b.dirname=function(a){var b=f.exec(a)[1]||"";return b?1===b.length||d&&b.length<=3&&":"===b.charAt(1)?b:b.substring(0,b.length-1):"."},b.basename=function(a,b){var c=f.exec(a)[2]||"";return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},b.extname=function(a){return f.exec(a)[3]||""}}),a.register("colors.js",function(a,b,c){a.exports={aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],transparent:[0,0,0,0],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1],rebeccapurple:[102,51,153,1]}}),a.register("errors.js",function(a,b,c){function d(a){this.name="ParseError",this.message=a,Error.captureStackTrace(this,d)}function e(a){this.name="SyntaxError",this.message=a,Error.captureStackTrace(this,d)}b.ParseError=d,b.SyntaxError=e,e.prototype.__proto__=Error.prototype,d.prototype.__proto__=Error.prototype,e.prototype.__proto__=Error.prototype}),a.register("units.js",function(a,b,c){a.exports=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","in","pt","pc","px","deg","grad","rad","turn","s","ms","Hz","kHz","dpi","dpcm","dppx","x","%","fr"]}),a.register("functions/index.js",function(a,b,c){b["add-property"]=c("./add-property"),b.adjust=c("./adjust"),b.alpha=c("./alpha"),b["base-convert"]=c("./base-convert"),b.basename=c("./basename"),b.blend=c("./blend"),b.blue=c("./blue"),b.clone=c("./clone"),b.component=c("./component"),b.contrast=c("./contrast"),b.convert=c("./convert"),b["current-media"]=c("./current-media"),b.define=c("./define"),b.dirname=c("./dirname"),b.error=c("./error"),b.extname=c("./extname"),b.green=c("./green"),b.hsl=c("./hsl"),b.hsla=c("./hsla"),b.hue=c("./hue"),b.length=c("./length"),b.lightness=c("./lightness"),b["list-separator"]=c("./list-separator"),b.lookup=c("./lookup"),b.luminosity=c("./luminosity"),b.match=c("./match"),b.math=c("./math"),b.merge=b.extend=c("./merge"),b.operate=c("./operate"),b["opposite-position"]=c("./opposite-position"),b.p=c("./p"),b.pathjoin=c("./pathjoin"),b.pop=c("./pop"),b.push=b.append=c("./push"),b.range=c("./range"),b.red=c("./red"),b.remove=c("./remove"),b.replace=c("./replace"),b.rgb=c("./rgb"),b.rgba=c("./rgba"),b.s=c("./s"),b.saturation=c("./saturation"),b["selector-exists"]=c("./selector-exists"),b.selector=c("./selector"),b.selectors=c("./selectors"),b.shift=c("./shift"),b.split=c("./split"),b.substr=c("./substr"),b.slice=c("./slice"),b.tan=c("./tan"),b.trace=c("./trace"),b.transparentify=c("./transparentify"),b.type=b.typeof=b["type-of"]=c("./type"),b.unit=c("./unit"),b.unquote=c("./unquote"),b.unshift=b.prepend=c("./unshift"),b.warn=c("./warn"),b["-math-prop"]=c("./math-prop"),b["-prefix-classes"]=c("./prefix-classes")}),a.register("functions/url.js",function(a,b,c){var d=c("../visitor/compiler"),e=c("../renderer").events,f=c("../nodes"),g=c("../path").extname,h=c("../utils"),i={".gif":"image/gif",".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".svg":"image/svg+xml",".webp":"image/webp",".ttf":"application/x-font-ttf",".eot":"application/vnd.ms-fontobject",".woff":"application/font-woff",".woff2":"application/font-woff2"},j={BASE_64:"base64",UTF8:"charset=utf-8"};a.exports=function(a){function l(a,i){var l=new d(a),m=j.BASE_64;l.isURL=!0,a=a.nodes.map(function(a){return l.visit(a)}).join(""),a=parse(a);var s,t,n=g(a.pathname),o=k[n],p=a.hash||"",q=new f.Literal('url("'+a.href+'")'),r=b.concat(this.paths);if(!o)return q;if(a.protocol)return q;var u=h.lookup(a.pathname,r);return u?(s=fs.readFileSync(u),!1!==c&&s.length>c?q:(i&&"utf8"==i.first.val.toLowerCase()?(m=j.UTF8,t=s.toString("utf8").replace(/\s+/g," ").replace(/[{}\|\\\^~\[\]`"<>#%]/g,function(a){return"%"+a[0].charCodeAt(0).toString(16).toUpperCase()}).trim()):t=s.toString(m)+p,new f.Literal('url("data:'+o+";"+m+","+t+'")'))):(e.emit("file not found","File "+q+" could not be found, literal url retained!"),q)}a=a||{};var b=a.paths||[],c=null!=a.limit?a.limit:3e4,k=a.mimes||i;return l.raw=!0,l},a.exports.mimes=i}),a.register("functions/add-property.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");(a.exports=function(b,c){d.assertType(b,"expression","name"),b=d.unwrap(b).first,d.assertString(b,"name"),d.assertType(c,"expression","expr");var f=new e.Property([b],c),g=this.closestBlock,h=g.nodes.length,i=g.nodes.slice(0,g.index),j=g.nodes.slice(g.index++,h);return i.push(f),g.nodes=i.concat(j),f}).raw=!0}),a.register("functions/adjust.js",function(a,b,c){var d=c("../utils");a.exports=function(b,c,e){d.assertColor(b,"color"),d.assertString(c,"prop"),d.assertType(e,"unit","amount");var f=b.hsla.clone();if(c={hue:"h",saturation:"s",lightness:"l"}[c.string],!c)throw new Error("invalid adjustment property");var g=e.val;return"%"==e.type&&(g="l"==c&&g>0?(100-f[c])*g/100:f[c]*(g/100)),f[c]+=g,f.rgba}}),a.register("functions/alpha.js",function(a,b,c){var d=c("../nodes"),e=c("./rgba");a.exports=function(b,c){return b=b.rgba,c?e(new d.Unit(b.r),new d.Unit(b.g),new d.Unit(b.b),c):new d.Unit(b.a,"")}}),a.register("functions/base-convert.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");(a.exports=function(a,b,c){d.assertPresent(a,"number"),d.assertPresent(b,"base"),a=d.unwrap(a).nodes[0].val,b=d.unwrap(b).nodes[0].val,c=c&&d.unwrap(c).nodes[0].val||2;for(var f=Number(a).toString(b);f.length<c;)f="0"+f;return new e.Literal(f)}).raw=!0}),a.register("functions/basename.js",function(a,b,c){var d=c("../utils"),e=c("../path");a.exports=function(b,c){return d.assertString(b,"path"),e.basename(b.val,c&&c.val)}}),a.register("functions/blend.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c){return d.assertColor(b),b=b.rgba,c=c||new e.RGBA(255,255,255,1),d.assertColor(c),c=c.rgba,new e.RGBA(b.r*b.a+c.r*(1-b.a),b.g*b.a+c.g*(1-b.a),b.b*b.a+c.b*(1-b.a),b.a+c.a-b.a*c.a)}}),a.register("functions/blue.js",function(a,b,c){var d=c("../nodes"),e=c("./rgba");a.exports=function(b,c){return b=b.rgba,c?e(new d.Unit(b.r),new d.Unit(b.g),c,new d.Unit(b.a)):new d.Unit(b.b,"")}}),a.register("functions/clone.js",function(a,b,c){var d=c("../utils");(a.exports=function(b){return d.assertPresent(b,"expr"),b.clone()}).raw=!0}),a.register("functions/component.js",function(a,b,c){var d=c("../utils"),e=c("../nodes"),f={red:"r",green:"g",blue:"b",alpha:"a",hue:"h",saturation:"s",lightness:"l"},g={hue:"deg",saturation:"%",lightness:"%"},h={red:"rgba",blue:"rgba",green:"rgba",alpha:"rgba",hue:"hsla",saturation:"hsla",lightness:"hsla"};a.exports=function(b,c){d.assertColor(b,"color"),d.assertString(c,"name");var c=c.string,i=g[c],j=h[c],c=f[c];if(!c)throw new Error('invalid color component "'+c+'"');return new e.Unit(b[j][c],i)}}),a.register("functions/contrast.js",function(a,b,c){var d=c("../utils"),e=c("../nodes"),f=c("./blend"),g=c("./luminosity");a.exports=function a(b,c){function a(a,b){1>a.a&&(a=f(a,b));var c=g(b).val+.05,d=g(a).val+.05,e=c/d;return d>c&&(e=1/e),Math.round(10*e)/10}function m(a,b){return Math.min(Math.max(0,(a-b*c.a)/(1-c.a)),255)}if("rgba"!=b.nodeName&&"hsla"!=b.nodeName)return new e.Literal("contrast("+(b.isNull?"":b.toString())+")");var h=new e.Object;if(b=b.rgba,c=c||new e.RGBA(255,255,255,1),d.assertColor(c),c=c.rgba,1<=c.a){var i=new e.Unit(a(b,c));h.set("ratio",i),h.set("error",new e.Unit(0)),h.set("min",i),h.set("max",i)}else{var j=a(b,f(c,new e.RGBA(0,0,0,1))),k=a(b,f(c,new e.RGBA(255,255,255,1))),l=Math.max(j,k),n=new e.RGBA(m(b.r,c.r),m(b.g,c.g),m(b.b,c.b),1),o=a(b,f(c,n));h.set("ratio",new e.Unit(Math.round(50*(o+l))/100)),h.set("error",new e.Unit(Math.round(50*(l-o))/100)),h.set("min",new e.Unit(o)),h.set("max",new e.Unit(l))}return h}}),a.register("functions/convert.js",function(a,b,c){var d=c("../utils");a.exports=function(b){return d.assertString(b,"str"),d.parseString(b.string)}}),a.register("functions/current-media.js",function(a,b,c){var d=c("../nodes");a.exports=function(){function c(a){return"media"==a.nodeName?(a.val=b.visit(a.val),a.toString()):a.block.parent.node?c(a.block.parent.node):void 0}var b=this;return new d.String(c(this.closestBlock.node)||"")}}),a.register("functions/define.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f){d.assertType(b,"string","name"),c=d.unwrap(c);var g=this.currentScope;f&&f.toBoolean().isTrue&&(g=this.global.scope);var h=new e.Ident(b.val,c);return g.add(h),e.nil}}),a.register("functions/dirname.js",function(a,b,c){var d=c("../utils"),e=c("../path");a.exports=function(b){return d.assertString(b,"path"),e.dirname(b.val).replace(/\\/g,"/")}}),a.register("functions/error.js",function(a,b,c){var d=c("../utils");a.exports=function(b){d.assertType(b,"string","msg");var c=new Error(b.val);throw c.fromStylus=!0,c}}),a.register("functions/extname.js",function(a,b,c){var d=c("../utils"),e=c("../path");a.exports=function(b){return d.assertString(b,"path"),e.extname(b.val)}}),a.register("functions/green.js",function(a,b,c){var d=c("../nodes"),e=c("./rgba");a.exports=function(b,c){return b=b.rgba,c?e(new d.Unit(b.r),c,new d.Unit(b.b),new d.Unit(b.a)):new d.Unit(b.g,"")}}),a.register("functions/hsl.js",function(a,b,c){var d=c("../utils"),e=c("../nodes"),f=c("./hsla");a.exports=function(b,c,g){return 1==arguments.length?(d.assertColor(b,"color"),b.hsla):f(b,c,g,new e.Unit(1))}}),a.register("functions/hsla.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f,g){switch(arguments.length){case 1:return d.assertColor(b),b.hsla;case 2:d.assertColor(b);var h=b.hsla;d.assertType(c,"unit","alpha");var g=c.clone();return"%"==g.type&&(g.val/=100),new e.HSLA(h.h,h.s,h.l,g.val);default:d.assertType(b,"unit","hue"),d.assertType(c,"unit","saturation"),d.assertType(f,"unit","lightness"),d.assertType(g,"unit","alpha");var g=g.clone();return g&&"%"==g.type&&(g.val/=100),new e.HSLA(b.val,c.val,f.val,g.val)}}}),a.register("functions/hue.js",function(a,b,c){var d=c("../nodes"),e=c("./hsla"),f=c("./component");a.exports=function(b,c){if(c){var g=b.hsla;return e(c,new d.Unit(g.s),new d.Unit(g.l),new d.Unit(g.a))}return f(b,new d.String("hue"))}}),a.register("functions/length.js",function(a,b,c){var d=c("../utils");(a.exports=function(b){if(b){if(b.nodes){var c=d.unwrap(b).nodes;return 1==c.length&&"object"==c[0].nodeName?c[0].length:c.length}return 1}return 0}).raw=!0}),a.register("functions/lightness.js",function(a,b,c){var d=c("../nodes"),e=c("./hsla"),f=c("./component");a.exports=function(b,c){if(c){var g=b.hsla;return e(new d.Unit(g.h),new d.Unit(g.s),c,new d.Unit(g.a))}return f(b,new d.String("lightness"))}}),a.register("functions/list-separator.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");(a.exports=function(b){return b=d.unwrap(b),new e.String(b.isList?",":" ")}).raw=!0}),a.register("functions/lookup.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b){d.assertType(b,"string","name");var c=this.lookup(b.val);return c?this.visit(c):e.nil}}),a.register("functions/luminosity.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b){function c(a){return a/=255,.03928>a?a/12.92:Math.pow((a+.055)/1.055,2.4)}return d.assertColor(b),b=b.rgba,new e.Unit(.2126*c(b.r)+.7152*c(b.g)+.0722*c(b.b))}}),a.register("functions/match.js",function(a,b,c){function g(a){return a=a&&a.string,!!a&&a.split("").every(function(a){return~f.indexOf(a)})}var d=c("../utils"),f=(c("../nodes"),"igm");a.exports=function(b,c,e){d.assertType(b,"string","pattern"),d.assertString(c,"val");var f=new RegExp(b.val,g(e)?e.string:"");return c.string.match(f)}}),a.register("functions/math-prop.js",function(a,b,c){var d=c("../nodes");a.exports=function(b){return new d.Unit(Math[b.string])}}),a.register("functions/math.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c){return d.assertType(b,"unit","n"),d.assertString(c,"fn"),new e.Unit(Math[c.string](b.val),b.type)}}),a.register("functions/merge.js",function(a,b,c){var d=c("../utils");(a.exports=function(b){d.assertPresent(b,"dest"),b=d.unwrap(b).first,d.assertType(b,"object","dest");for(var c=d.unwrap(arguments[arguments.length-1]).first,e=!0===c.val,f=1,g=arguments.length-e;f<g;++f)d.merge(b.vals,d.unwrap(arguments[f]).first.vals,e);return b}).raw=!0}),a.register("functions/operate.js",function(a,b,c){var d=c("../utils");a.exports=function(b,c,e){return d.assertType(b,"string","op"),d.assertPresent(c,"left"),d.assertPresent(e,"right"),c.operate(b.val,e)}}),a.register("functions/opposite-position.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");(a.exports=function(b){var c=[];return d.unwrap(b).nodes.forEach(function(a,b){d.assertString(a,"position "+b),a=function(){switch(a.string){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left";case"center":return"center";default:throw new Error("invalid position "+a)}}(),c.push(new e.Literal(a))}),c}).raw=!0}),a.register("functions/p.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");(a.exports=function(){return[].slice.call(arguments).forEach(function(a){a=d.unwrap(a),a.nodes.length&&console.log("[90minspect:[0m %s",a.toString().replace(/^\(|\)$/g,""))}),e.nil}).raw=!0}),a.register("functions/pathjoin.js",function(a,b,c){var d=c("../path");(a.exports=function(){var b=[].slice.call(arguments).map(function(a){return a.first.string});return d.join.apply(null,b).replace(/\\/g,"/")}).raw=!0}),a.register("functions/pop.js",function(a,b,c){var d=c("../utils");(a.exports=function(b){return b=d.unwrap(b),b.nodes.pop()}).raw=!0}),a.register("functions/prefix-classes.js",function(a,b,c){var d=c("../utils");a.exports=function(b,c){d.assertString(b,"prefix"),d.assertType(c,"block","block");var e=this.prefix;return this.options.prefix=this.prefix=b.string,c=this.visit(c),this.options.prefix=this.prefix=e,c}}),a.register("functions/push.js",function(a,b,c){var d=c("../utils");(a.exports=function(a){a=d.unwrap(a);for(var b=1,c=arguments.length;b<c;++b)a.nodes.push(d.unwrap(arguments[b]).clone());return a.nodes.length}).raw=!0}),a.register("functions/range.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f){if(d.assertType(b,"unit","start"),d.assertType(c,"unit","stop"),f){if(d.assertType(f,"unit","step"),0==f.val)throw new Error('ArgumentError: "step" argument must not be zero')}else f=new e.Unit(1);for(var g=new e.Expression,h=b.val;h<=c.val;h+=f.val)g.push(new e.Unit(h,b.type));return g}}),a.register("functions/red.js",function(a,b,c){var d=c("../nodes"),e=c("./rgba");a.exports=function(b,c){return b=b.rgba,c?e(c,new d.Unit(b.g),new d.Unit(b.b),new d.Unit(b.a)):new d.Unit(b.r,"")}}),a.register("functions/remove.js",function(a,b,c){var d=c("../utils");a.exports=function(b,c){return d.assertType(b,"object","object"),d.assertString(c,"key"),delete b.vals[c.string],b}}),a.register("functions/replace.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f){d.assertString(b,"pattern"),d.assertString(c,"replacement"),d.assertString(f,"val"),b=new RegExp(b.string,"g");var g=f.string.replace(b,c.string);return f instanceof e.Ident?new e.Ident(g):new e.String(g)}}),a.register("functions/rgb.js",function(a,b,c){var d=c("../utils"),e=c("../nodes"),f=c("./rgba");a.exports=function(b,c,g){switch(arguments.length){case 1:d.assertColor(b);var h=b.rgba;return new e.RGBA(h.r,h.g,h.b,1);default:return f(b,c,g,new e.Unit(1))}}}),a.register("functions/rgba.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f,g){switch(arguments.length){case 1:return d.assertColor(b),b.rgba;case 2:d.assertColor(b);var h=b.rgba;return d.assertType(c,"unit","alpha"),g=c.clone(),"%"==g.type&&(g.val/=100),new e.RGBA(h.r,h.g,h.b,g.val);default:d.assertType(b,"unit","red"),d.assertType(c,"unit","green"),d.assertType(f,"unit","blue"),d.assertType(g,"unit","alpha");var i="%"==b.type?Math.round(2.55*b.val):b.val,j="%"==c.type?Math.round(2.55*c.val):c.val,k="%"==f.type?Math.round(2.55*f.val):f.val;return g=g.clone(),g&&"%"==g.type&&(g.val/=100),new e.RGBA(i,j,k,g.val)}}}),a.register("functions/s.js",function(a,b,c){var d=c("../utils"),e=c("../nodes"),f=c("../visitor/compiler");(a.exports=function(b){b=d.unwrap(b).nodes[0],d.assertString(b);var c=this,g=b.string,h=arguments,i=1;return g=g.replace(/%(s|d)/g,function(a,b){var g=h[i++]||e.nil;switch(b){case"s":return new f(g,c.options).compile();case"d":if(g=d.unwrap(g).first,"unit"!=g.nodeName)throw new Error("%d requires a unit");return g.val}}),new e.Literal(g)}).raw=!0}),a.register("functions/saturation.js",function(a,b,c){var d=c("../nodes"),e=c("./hsla"),f=c("./component");a.exports=function(b,c){if(c){var g=b.hsla;return e(new d.Unit(g.h),c,new d.Unit(g.l),new d.Unit(g.a))}return f(b,new d.String("saturation"))}}),a.register("functions/selector-exists.js",function(a,b,c){var d=c("../utils");a.exports=function(b){if(d.assertString(b,"selector"),!this.__selectorsMap__){var e=c("../visitor/normalizer"),f=new e(this.root.clone());f.visit(f.root),this.__selectorsMap__=f.map}return b.string in this.__selectorsMap__}}),a.register("functions/selector.js",function(a,b,c){function e(a,b){a.forEach(function(a){a=a.first,d.assertString(a,"selector"),b.push(f(a.string))})}function f(a){var e,b=new c("../parser"),d=new b(a);return d.state.push("selector-parts"),e=d.selector(),e.forEach(function(a){a.val=a.segments.map(function(a){return a.toString()}).join("")}),e}var d=c("../utils");(a.exports=function(){var b=this.selectorStack,g=[].slice.call(arguments);if(1==g.length){var h=d.unwrap(g[0]),i=h.nodes.length;if(1==i){d.assertString(h.first,"selector");var j=c("../selector-parser"),k=h.first.string,l=new j(k).parse().val;if(l==k)return k;b.push(f(k))}else i>1&&(h.isList?e(h.nodes,b):b.push(f(h.nodes.map(function(a){return d.assertString(a,"selector"),a.string}).join(" "))))}else g.length>1&&e(g,b);return b.length?d.compileSelectors(b).join(","):"&"}).raw=!0}),a.register("functions/selectors.js",function(a,b,c){var d=c("../nodes"),e=c("../selector-parser");a.exports=function(){var b=this.selectorStack,c=new d.Expression(!0);if(b.length)for(var f=0;f<b.length;f++){var h,g=b[f];if(g.length>1)c.push(new d.String(g.map(function(a){return h=new e(a.val).parse().nested,(h&&f?"& ":"")+a.val}).join(",")));else{var i=g[0].val;h=new e(i).parse().nested,c.push(new d.String((h&&f?"& ":"")+i))}}else c.push(new d.String("&"));return c}}),a.register("functions/shift.js",function(a,b,c){var d=c("../utils");(a.exports=function(a){return a=d.unwrap(a),a.nodes.shift()}).raw=!0}),a.register("functions/split.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c){d.assertString(b,"delimiter"),d.assertString(c,"val");for(var f=c.string.split(b.string),g=new e.Expression,h=c instanceof e.Ident?e.Ident:e.String,i=0,j=f.length;i<j;++i)g.nodes.push(new h(f[i]));return g}}),a.register("functions/slice.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");(a.exports=function(b,c,f){if(c=c&&c.nodes[0].val,f=f&&f.nodes[0].val,b=d.unwrap(b).nodes,b.length>1)return d.coerce(b.slice(c,f),!0);var g=b[0].string.slice(c,f);return b[0]instanceof e.Ident?new e.Ident(g):new e.String(g)}).raw=!0}),a.register("functions/substr.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f){d.assertString(b,"val"),d.assertType(c,"unit","start"),f=f&&f.val;var g=b.string.substr(c.val,f);return b instanceof e.Ident?new e.Ident(g):new e.String(g)}}),a.register("functions/tan.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function a(b){d.assertType(b,"unit","angle");var c=b.val;"deg"===b.type&&(c*=Math.PI/180);var f=Math.pow(10,9),g=Math.round(Math.sin(c)*f)/f,h=Math.round(Math.cos(c)*f)/f,a=Math.round(f*g/h)/f;return new e.Unit(a,"")}}),a.register("functions/trace.js",function(a,b,c){var d=c("../nodes");a.exports=function(){return console.log(this.stack),d.nil}}),a.register("functions/transparentify.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b,c,f){function h(a){return 0==g?c[a]:c[a]+(b[a]-c[a])/g}d.assertColor(b),b=b.rgba,c=c||new e.RGBA(255,255,255,1),f||!c||c.rgba||(f=c,c=new e.RGBA(255,255,255,1)),d.assertColor(c),c=c.rgba;var g=["r","g","b"].map(function(a){return(b[a]-c[a])/((0<b[a]-c[a]?255:0)-c[a])}).sort(function(a,b){return a<b})[0];return f&&(d.assertType(f,"unit","alpha"),"%"==f.type?g=f.val/100:f.type||(g=f=f.val)),g=Math.max(Math.min(g,1),0),new e.RGBA(h("r"),h("g"),h("b"),Math.round(100*g)/100)}}),a.register("functions/type.js",function(a,b,c){
var d=c("../utils");a.exports=function(b){return d.assertPresent(b,"expression"),b.nodeName}}),a.register("functions/unit.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function a(a,b){return d.assertType(a,"unit","unit"),b?(d.assertString(b,"type"),new e.Unit(a.val,b.string)):a.type||""}}),a.register("functions/unquote.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b){return d.assertString(b,"string"),new e.Literal(b.string)}}),a.register("functions/unshift.js",function(a,b,c){var d=c("../utils");(a.exports=function(a){a=d.unwrap(a);for(var b=1,c=arguments.length;b<c;++b)a.nodes.unshift(d.unwrap(arguments[b]));return a.nodes.length}).raw=!0}),a.register("functions/warn.js",function(a,b,c){var d=c("../utils"),e=c("../nodes");a.exports=function(b){return d.assertType(b,"string","msg"),console.warn("Warning: %s",b.val),e.nil}}),a.register("lexer.js",function(a,b,c){function h(a,b){function c(a,b,c,d){var e=d.lastIndexOf("/*",c)>d.lastIndexOf("*/",c),f=d.lastIndexOf("//",c),g=d.lastIndexOf("\n",c),h=0,i=0;if(~f&&f>g)for(;g!=c;){if("'"==d[g]&&(i?i--:i++),'"'==d[g]&&(h?h--:h++),"/"==d[g]&&"/"==d[g+1]){e=!i&&!h;break}++g}return e?a:b+"\r"}b=b||{},this.stash=[],this.indentStack=[],this.indentRe=null,this.lineno=1,this.column=1,"\ufeff"==a.charAt(0)&&(a=a.slice(1)),this.str=a.replace(/\s+$/,"\n").replace(/\r\n?/g,"\n").replace(/\\ *\n/g,"\r").replace(/([,(:](?!\/\/[^ ])) *(?:\/\/[^\n]*|\/\*.*?\*\/)?\n\s*/g,c).replace(/\s*\n[ \t]*([,)])/g,c)}var d=c("./token"),e=c("./nodes"),f=c("./errors");b=a.exports=h;var g={and:"&&",or:"||",is:"==",isnt:"!=","is not":"!=",":=":"?="};h.prototype={inspect:function(){for(var a,b=this.str,c=[];"eos"!=(a=this.next()).type;)c.push(a.inspect());return this.str=b,c.concat(a.inspect()).join("\n")},lookahead:function(a){for(var b=a-this.stash.length;b-- >0;)this.stash.push(this.advance());return this.stash[--a]},skip:function(a){var b=a[0];a=b?b.length:a,this.str=this.str.substr(a),b?this.move(b):this.column+=a},move:function(a){var b=a.match(/\n/g),c=a.lastIndexOf("\n");b&&(this.lineno+=b.length),this.column=~c?a.length-c:this.column+a.length},next:function(){var a=this.stashed()||this.advance();return this.prev=a,a},isPartOfSelector:function(){var a=this.stash[this.stash.length-1]||this.prev;switch(a&&a.type){case"color":return 2==a.val.raw.length;case".":case"[":return!0}return!1},advance:function(){var a=this.column,b=this.lineno,c=this.eos()||this.nil()||this.sep()||this.keyword()||this.urlchars()||this.comment()||this.newline()||this.escaped()||this.important()||this.literal()||this.fun()||this.anonFunc()||this.atrule()||this.brace()||this.paren()||this.color()||this.string()||this.unit()||this.namedop()||this.boolean()||this.unicode()||this.ident()||this.op()||this.eol()||this.space()||this.selector();return c.lineno=b,c.column=a,c},peek:function(){return this.lookahead(1)},stashed:function(){return this.stash.shift()},eos:function(){if(!this.str.length)return this.indentStack.length?(this.indentStack.shift(),new d("outdent")):new d("eos")},urlchars:function(){var a;if(this.isURL)return(a=/^[\/:@.;?&=*!,<>#%0-9]+/.exec(this.str))?(this.skip(a),new d("literal",new e.Literal(a[0]))):void 0},sep:function(){var a;if(a=/^;[ \t]*/.exec(this.str))return this.skip(a),new d(";")},eol:function(){if("\r"==this.str[0])return++this.lineno,this.skip(1),this.advance()},space:function(){var a;if(a=/^([ \t]+)/.exec(this.str))return this.skip(a),new d("space")},escaped:function(){var a;if(a=/^\\(.)[ \t]*/.exec(this.str)){var b=a[1];return this.skip(a),new d("ident",new e.Literal(b))}},literal:function(){var a;if(a=/^@css[ \t]*\{/.exec(this.str)){this.skip(a);for(var b,g,c=1,f="";b=this.str[0];){switch(this.str=this.str.substr(1),b){case"{":++c;break;case"}":--c;break;case"\n":case"\r":++this.lineno}if(f+=b,!c)break}return f=f.replace(/\s*}$/,""),g=new e.Literal(f),g.css=!0,new d("literal",g)}},important:function(){var a;if(a=/^!important[ \t]*/.exec(this.str))return this.skip(a),new d("ident",new e.Literal("!important"))},brace:function(){var a;if(a=/^([{}])/.exec(this.str)){this.skip(1);var b=a[1];return new d(b,b)}},paren:function(){var a;if(a=/^([()])([ \t]*)/.exec(this.str)){var b=a[1];this.skip(a),")"==b&&(this.isURL=!1);var c=new d(b,b);return c.space=a[2],c}},nil:function(){var a,b;if(a=/^(null)\b[ \t]*/.exec(this.str))return this.skip(a),b=this.isPartOfSelector()?new d("ident",new e.Ident(a[0])):new d("null",e.nil)},keyword:function(){var a,b;if(a=/^(return|if|else|unless|for|in)\b[ \t]*/.exec(this.str)){var c=a[1];return this.skip(a),b=this.isPartOfSelector()?new d("ident",new e.Ident(a[0])):new d(c,c)}},namedop:function(){var a,b;if(a=/^(not|and|or|is a|is defined|isnt|is not|is)(?!-)\b([ \t]*)/.exec(this.str)){var c=a[1];return this.skip(a),this.isPartOfSelector()?b=new d("ident",new e.Ident(a[0])):(c=g[c]||c,b=new d(c,c)),b.space=a[2],b}},op:function(){var a;if(a=/^([.]{1,3}|&&|\|\||[!<>=?:]=|\*\*|[-+*\/%]=?|[,=?:!~<>&\[\]])([ \t]*)/.exec(this.str)){var b=a[1];this.skip(a),b=g[b]||b;var c=new d(b,b);return c.space=a[2],this.isURL=!1,c}},anonFunc:function(){var a;if("@"==this.str[0]&&"("==this.str[1])return this.skip(2),a=new d("function",new e.Ident("anonymous")),a.anonymous=!0,a},atrule:function(){var a;if(a=/^@(?:-(\w+)-)?([a-zA-Z0-9-_]+)[ \t]*/.exec(this.str)){this.skip(a);var b=a[1],c=a[2];switch(c){case"require":case"import":case"charset":case"namespace":case"media":case"scope":case"supports":return new d(c);case"document":return new d("-moz-document");case"block":return new d("atblock");case"extend":case"extends":return new d("extend");case"keyframes":return new d(c,b);default:return new d("atrule",b?"-"+b+"-"+c:c)}}},comment:function(){if("/"==this.str[0]&&"/"==this.str[1]){var a=this.str.indexOf("\n");return-1==a&&(a=this.str.length),this.skip(a),this.advance()}if("/"==this.str[0]&&"*"==this.str[1]){var a=this.str.indexOf("*/");-1==a&&(a=this.str.length);var b=this.str.substr(0,a+2),c=b.split(/\n|\r/).length-1,f=!0,g=!1;return this.lineno+=c,this.skip(a+2),"!"==b[2]&&(b=b.replace("*!","*"),f=!1),this.prev&&";"==this.prev.type&&(g=!0),new d("comment",new e.Comment(b,f,g))}},boolean:function(){var a;if(a=/^(true|false)\b([ \t]*)/.exec(this.str)){var b=e.Boolean("true"==a[1]);this.skip(a);var c=new d("boolean",b);return c.space=a[2],c}},unicode:function(){var a;if(a=/^u\+[0-9a-f?]{1,6}(?:-[0-9a-f]{1,6})?/i.exec(this.str))return this.skip(a),new d("literal",new e.Literal(a[0]))},fun:function(){var a;if(a=/^(-*[_a-zA-Z$][-\w\d$]*)\(([ \t]*)/.exec(this.str)){var b=a[1];this.skip(a),this.isURL="url"==b;var c=new d("function",new e.Ident(b));return c.space=a[2],c}},ident:function(){var a;if(a=/^-*[_a-zA-Z$][-\w\d$]*/.exec(this.str))return this.skip(a),new d("ident",new e.Ident(a[0]))},newline:function(){var a,b;if(this.indentRe?a=this.indentRe.exec(this.str):(b=/^\n([\t]*)[ \t]*/,a=b.exec(this.str),a&&!a[1].length&&(b=/^\n([ \t]*)/,a=b.exec(this.str)),a&&a[1].length&&(this.indentRe=b)),a){var c,e=a[1].length;if(this.skip(a)," "===this.str[0]||"\t"===this.str[0])throw new f.SyntaxError("Invalid indentation. You can use tabs or spaces to indent, but not both.");if("\n"==this.str[0])return this.advance();if(this.indentStack.length&&e<this.indentStack[0]){for(;this.indentStack.length&&this.indentStack[0]>e;)this.stash.push(new d("outdent")),this.indentStack.shift();c=this.stash.pop()}else e&&e!=this.indentStack[0]?(this.indentStack.unshift(e),c=new d("indent")):c=new d("newline");return c}},unit:function(){var a;if(a=/^(-)?(\d+\.\d+|\d+|\.\d+)(%|[a-zA-Z]+)?[ \t]*/.exec(this.str)){this.skip(a);var b=parseFloat(a[2]);"-"==a[1]&&(b=-b);var c=new e.Unit(b,a[3]);return c.raw=a[0],new d("unit",c)}},string:function(){var a;if(a=/^("[^"]*"|'[^']*')[ \t]*/.exec(this.str)){var b=a[1],c=a[0][0];return this.skip(a),b=b.slice(1,-1).replace(/\\n/g,"\n"),new d("string",new e.String(b,c))}},color:function(){return this.rrggbbaa()||this.rrggbb()||this.rgba()||this.rgb()||this.nn()||this.n()},n:function(){var a;if(a=/^#([a-fA-F0-9]{1})[ \t]*/.exec(this.str)){this.skip(a);var b=parseInt(a[1]+a[1],16),c=new e.RGBA(b,b,b,1);return c.raw=a[0],new d("color",c)}},nn:function(){var a;if(a=/^#([a-fA-F0-9]{2})[ \t]*/.exec(this.str)){this.skip(a);var b=parseInt(a[1],16),c=new e.RGBA(b,b,b,1);return c.raw=a[0],new d("color",c)}},rgb:function(){var a;if(a=/^#([a-fA-F0-9]{3})[ \t]*/.exec(this.str)){this.skip(a);var b=a[1],c=parseInt(b[0]+b[0],16),f=parseInt(b[1]+b[1],16),g=parseInt(b[2]+b[2],16),h=new e.RGBA(c,f,g,1);return h.raw=a[0],new d("color",h)}},rgba:function(){var a;if(a=/^#([a-fA-F0-9]{4})[ \t]*/.exec(this.str)){this.skip(a);var b=a[1],c=parseInt(b[0]+b[0],16),f=parseInt(b[1]+b[1],16),g=parseInt(b[2]+b[2],16),h=parseInt(b[3]+b[3],16),i=new e.RGBA(c,f,g,h/255);return i.raw=a[0],new d("color",i)}},rrggbb:function(){var a;if(a=/^#([a-fA-F0-9]{6})[ \t]*/.exec(this.str)){this.skip(a);var b=a[1],c=parseInt(b.substr(0,2),16),f=parseInt(b.substr(2,2),16),g=parseInt(b.substr(4,2),16),h=new e.RGBA(c,f,g,1);return h.raw=a[0],new d("color",h)}},rrggbbaa:function(){var a;if(a=/^#([a-fA-F0-9]{8})[ \t]*/.exec(this.str)){this.skip(a);var b=a[1],c=parseInt(b.substr(0,2),16),f=parseInt(b.substr(2,2),16),g=parseInt(b.substr(4,2),16),h=parseInt(b.substr(6,2),16),i=new e.RGBA(c,f,g,h/255);return i.raw=a[0],new d("color",i)}},selector:function(){var a;if(a=/^\^|.*?(?=\/\/(?![^\[]*\])|[,\n{])/.exec(this.str)){var b=a[0];return this.skip(a),new d("selector",b)}}}}),a.register("nodes/arguments.js",function(a,b,c){var e=(c("./node"),c("../nodes")),g=(c("../utils"),a.exports=function(){e.Expression.call(this),this.map={}});g.prototype.__proto__=e.Expression.prototype,g.fromExpression=function(a){var b=new g,c=a.nodes.length;b.lineno=a.lineno,b.column=a.column,b.isList=a.isList;for(var d=0;d<c;++d)b.push(a.nodes[d]);return b},g.prototype.clone=function(a){var b=e.Expression.prototype.clone.call(this,a);b.map={};for(var c in this.map)b.map[c]=this.map[c].clone(a,b);return b.isList=this.isList,b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},g.prototype.toJSON=function(){return{__type:"Arguments",map:this.map,isList:this.isList,preserve:this.preserve,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),a.register("nodes/binop.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c,e){d.call(this),this.op=b,this.left=c,this.right=e};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e(this.op);return b.left=this.left.clone(a,b),b.right=this.right&&this.right.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,this.val&&(b.val=this.val.clone(a,b)),b},e.prototype.toString=function(){return this.left.toString()+" "+this.op+" "+this.right.toString()},e.prototype.toJSON=function(){var a={__type:"BinOp",left:this.left,right:this.right,op:this.op,lineno:this.lineno,column:this.column,filename:this.filename};return this.val&&(a.val=this.val),a}}),a.register("nodes/block.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.nodes=[],this.parent=b,this.node=c,this.scope=!0};e.prototype.__proto__=d.prototype,e.prototype.__defineGetter__("hasProperties",function(){for(var a=0,b=this.nodes.length;a<b;++a)if("property"==this.nodes[a].nodeName)return!0}),e.prototype.__defineGetter__("hasMedia",function(){for(var a=0,b=this.nodes.length;a<b;++a){var c=this.nodes[a].nodeName;if("media"==c)return!0}return!1}),e.prototype.__defineGetter__("isEmpty",function(){return!this.nodes.length}),e.prototype.clone=function(a,b){a=a||this.parent;var c=new e(a,b||this.node);return c.lineno=this.lineno,c.column=this.column,c.filename=this.filename,c.scope=this.scope,this.nodes.forEach(function(a){c.push(a.clone(c,c))}),c},e.prototype.push=function(a){this.nodes.push(a)},e.prototype.toJSON=function(){return{__type:"Block",scope:this.scope,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),a.register("nodes/boolean.js",function(a,b,c){var d=c("./node"),f=(c("./index"),a.exports=function a(b){return d.call(this),this.nodeName?void(this.val=!!b):new a(b)});f.prototype.__proto__=d.prototype,f.prototype.toBoolean=function(){return this},f.prototype.__defineGetter__("isTrue",function(){return this.val}),f.prototype.__defineGetter__("isFalse",function(){return!this.val}),f.prototype.negate=function(){return new f(!this.val)},f.prototype.inspect=function(){return"[Boolean "+this.val+"]"},f.prototype.toString=function(){return this.val?"true":"false"},f.prototype.toJSON=function(){return{__type:"Boolean",val:this.val}}}),a.register("nodes/call.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.name=b,this.args=c};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e(this.name);return b.args=this.args.clone(a,b),this.block&&(b.block=this.block.clone(a,b)),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toString=function(){var a=this.args.nodes.map(function(a){var b=a.toString();return b.slice(1,b.length-1)}).join(", ");return this.name+"("+a+")"},e.prototype.toJSON=function(){var a={__type:"Call",name:this.name,args:this.args,lineno:this.lineno,column:this.column,filename:this.filename};return this.block&&(a.block=this.block),a}}),a.register("nodes/charset.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b){d.call(this),this.val=b};e.prototype.__proto__=d.prototype,e.prototype.toString=function(){return"@charset "+this.val},e.prototype.toJSON=function(){return{__type:"Charset",val:this.val,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/namespace.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.val=b,this.prefix=c};e.prototype.__proto__=d.prototype,e.prototype.toString=function(){return"@namespace "+(this.prefix?this.prefix+" ":"")+this.val},e.prototype.toJSON=function(){return{__type:"Namespace",val:this.val,prefix:this.prefix,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/comment.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c,e){d.call(this),this.str=b,this.suppress=c,this.inline=e};e.prototype.__proto__=d.prototype,e.prototype.toJSON=function(){return{__type:"Comment",str:this.str,suppress:this.suppress,inline:this.inline,lineno:this.lineno,column:this.column,filename:this.filename}},e.prototype.toString=function(){return this.str}}),a.register("nodes/each.js",function(a,b,c){var d=c("./node"),f=(c("./index"),a.exports=function(b,c,e,f){d.call(this),this.val=b,this.key=c,this.expr=e,this.block=f});f.prototype.__proto__=d.prototype,f.prototype.clone=function(a){var b=new f(this.val,this.key);return b.expr=this.expr.clone(a,b),b.block=this.block.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},f.prototype.toJSON=function(){return{__type:"Each",val:this.val,key:this.key,expr:this.expr,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/expression.js",function(a,b,c){var d=c("./node"),e=c("../nodes"),f=c("../utils"),g=a.exports=function(b){d.call(this),this.nodes=[],this.isList=b};g.prototype.__defineGetter__("isEmpty",function(){return!this.nodes.length}),g.prototype.__defineGetter__("first",function(){return this.nodes[0]?this.nodes[0].first:e.nil}),g.prototype.__defineGetter__("hash",function(){return this.nodes.map(function(a){return a.hash}).join("::")}),g.prototype.__proto__=d.prototype,g.prototype.clone=function(a){var b=new this.constructor(this.isList);return b.preserve=this.preserve,b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b.nodes=this.nodes.map(function(c){return c.clone(a,b)}),b},g.prototype.push=function(a){this.nodes.push(a)},g.prototype.operate=function(a,b,c){switch(a){case"[]=":var i,j,g=this,h=f.unwrap(b).nodes,c=f.unwrap(c);return h.forEach(function(a){if(i=g.nodes.length,"unit"==a.nodeName){for(var b=a.val<0?i+a.val:a.val,d=b;b-- >i;)g.nodes[b]=e.nil;g.nodes[d]=c}else a.string&&(j=g.nodes[0],j&&"object"==j.nodeName&&j.set(a.string,c.clone()))}),c;case"[]":var j,k=new e.Expression,l=f.unwrap(this).nodes,h=f.unwrap(b).nodes;return h.forEach(function(a){"unit"==a.nodeName?j=l[a.val<0?l.length+a.val:a.val]:"object"==l[0].nodeName&&(j=l[0].get(a.string)),j&&k.push(j)}),k.isEmpty?e.nil:f.unwrap(k);case"||":return this.toBoolean().isTrue?this:b;case"in":return d.prototype.operate.call(this,a,b);case"!=":return this.operate("==",b,c).negate();case"==":var m,n,i=this.nodes.length,b=b.toExpression();if(i!=b.nodes.length)return e.no;for(var o=0;o<i;++o)if(m=this.nodes[o],n=b.nodes[o],!m.operate(a,n).isTrue)return e.no;return e.yes;default:return this.first.operate(a,b,c)}},g.prototype.toBoolean=function(){return this.nodes.length>1?e.yes:this.first.toBoolean()},g.prototype.toString=function(){return"("+this.nodes.map(function(a){return a.toString()}).join(this.isList?", ":" ")+")"},g.prototype.toJSON=function(){return{__type:"Expression",isList:this.isList,preserve:this.preserve,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),a.register("nodes/function.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c,e){d.call(this),this.name=b,this.params=c,this.block=e,"function"==typeof c&&(this.fn=c)};e.prototype.__defineGetter__("arity",function(){return this.params.length}),e.prototype.__proto__=d.prototype,e.prototype.__defineGetter__("hash",function(){return"function "+this.name}),e.prototype.clone=function(a){if(this.fn)var b=new e(this.name,this.fn);else{var b=new e(this.name);b.params=this.params.clone(a,b),b.block=this.block.clone(a,b)}return b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toString=function(){return this.fn?this.name+"("+this.fn.toString().match(/^function *\w*\((.*?)\)/).slice(1).join(", ")+")":this.name+"("+this.params.nodes.join(", ")+")"},e.prototype.toJSON=function(){var a={__type:"Function",name:this.name,lineno:this.lineno,column:this.column,filename:this.filename};return this.fn?a.fn=this.fn:(a.params=this.params,a.block=this.block),a}}),a.register("nodes/group.js",function(a,b,c){var d=c("./node"),e=a.exports=function(){d.call(this),this.nodes=[],this.extends=[]};e.prototype.__proto__=d.prototype,e.prototype.push=function(a){this.nodes.push(a)},e.prototype.__defineGetter__("block",function(){return this.nodes[0].block}),e.prototype.__defineSetter__("block",function(a){for(var b=0,c=this.nodes.length;b<c;++b)this.nodes[b].block=a}),e.prototype.__defineGetter__("hasOnlyPlaceholders",function(){return this.nodes.every(function(a){return a.isPlaceholder})}),e.prototype.clone=function(a){var b=new e;return b.lineno=this.lineno,b.column=this.column,this.nodes.forEach(function(c){b.push(c.clone(a,b))}),b.filename=this.filename,b.block=this.block.clone(a,b),b},e.prototype.toJSON=function(){return{__type:"Group",nodes:this.nodes,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/hsla.js",function(a,b,c){function g(a){return a%=360,a>=0?a:360+a}function h(a){return Math.max(0,Math.min(a,100))}function i(a){return Math.max(0,Math.min(a,1))}var d=c("./node"),e=c("./index"),f=b=a.exports=function(b,c,e,f){d.call(this),this.h=g(b),this.s=h(c),this.l=h(e),this.a=i(f),this.hsla=this};f.prototype.__proto__=d.prototype,f.prototype.toString=function(){return"hsla("+this.h+","+this.s.toFixed(0)+"%,"+this.l.toFixed(0)+"%,"+this.a+")"},f.prototype.clone=function(a){var b=new f(this.h,this.s,this.l,this.a);return b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},f.prototype.toJSON=function(){return{__type:"HSLA",h:this.h,s:this.s,l:this.l,a:this.a,lineno:this.lineno,column:this.column,filename:this.filename}},f.prototype.__defineGetter__("rgba",function(){return e.RGBA.fromHSLA(this)}),f.prototype.__defineGetter__("hash",function(){return this.rgba.toString()}),f.prototype.add=function(a,b,c){return new f(this.h+a,this.s+b,this.l+c,this.a)},f.prototype.sub=function(a,b,c){return this.add(-a,-b,-c)},f.prototype.operate=function(a,b){switch(a){case"==":case"!=":case"<=":case">=":case"<":case">":case"is a":case"||":case"&&":return this.rgba.operate(a,b);default:return this.rgba.operate(a,b).hsla}},b.fromRGBA=function(a){var k,l,b=a.r/255,c=a.g/255,d=a.b/255,e=a.a,g=Math.min(b,c,d),h=Math.max(b,c,d),i=(h+g)/2,j=h-g;switch(h){case g:k=0;break;case b:k=60*(c-d)/j;break;case c:k=60*(d-b)/j+120;break;case d:k=60*(b-c)/j+240}return l=h==g?0:i<.5?j/(2*i):j/(2-2*i),k%=360,l*=100,i*=100,new f(k,l,i,e)},f.prototype.adjustLightness=function(a){return this.l=h(this.l+this.l*(a/100)),this},f.prototype.adjustHue=function(a){return this.h=g(this.h+a),this}}),a.register("nodes/ident.js",function(a,b,c){var d=c("./node"),e=c("./index"),f=a.exports=function(b,c,f){d.call(this),this.name=b,this.string=b,this.val=c||e.nil,this.mixin=!!f};f.prototype.__defineGetter__("isEmpty",function(){return void 0==this.val}),f.prototype.__defineGetter__("hash",function(){return this.name}),f.prototype.__proto__=d.prototype,f.prototype.clone=function(a){var b=new f(this.name);return b.val=this.val.clone(a,b),b.mixin=this.mixin,b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b.property=this.property,b.rest=this.rest,b},f.prototype.toJSON=function(){return{__type:"Ident",name:this.name,val:this.val,mixin:this.mixin,property:this.property,rest:this.rest,lineno:this.lineno,column:this.column,filename:this.filename}},f.prototype.toString=function(){return this.name},f.prototype.coerce=function(a){switch(a.nodeName){case"ident":case"string":case"literal":return new f(a.string);case"unit":return new f(a.toString());default:return d.prototype.coerce.call(this,a)}},f.prototype.operate=function(a,b){var c=b.first;switch(a){case"-":if("unit"==c.nodeName){var f=new e.Expression;return c=c.clone(),c.val=-c.val,f.push(this),f.push(c),f}case"+":return new e.Ident(this.string+this.coerce(c).string)}return d.prototype.operate.call(this,a,b)}}),a.register("nodes/if.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.cond=b,this.elses=[],c&&c.nodeName?this.block=c:this.negate=c};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.cond=this.cond.clone(a,b),b.block=this.block.clone(a,b),b.elses=this.elses.map(function(c){return c.clone(a,b)}),b.negate=this.negate,b.postfix=this.postfix,b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){return{__type:"If",cond:this.cond,block:this.block,elses:this.elses,negate:this.negate,postfix:this.postfix,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/import.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.path=b,this.once=c||!1};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.path=this.path.nodeName?this.path.clone(a,b):this.path,b.once=this.once,b.mtime=this.mtime,b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){return{__type:"Import",path:this.path,once:this.once,mtime:this.mtime,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/extend.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b){d.call(this),this.selectors=b};e.prototype.__proto__=d.prototype,e.prototype.clone=function(){return new e(this.selectors)},e.prototype.toString=function(){return"@extend "+this.selectors.join(", ")},e.prototype.toJSON=function(){return{__type:"Extend",selectors:this.selectors,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/index.js",function(a,b,c){b.Node=c("./node"),b.Root=c("./root"),b.Null=c("./null"),b.Each=c("./each"),b.If=c("./if"),b.Call=c("./call"),b.UnaryOp=c("./unaryop"),b.BinOp=c("./binop"),b.Ternary=c("./ternary"),b.Block=c("./block"),b.Unit=c("./unit"),b.String=c("./string"),b.HSLA=c("./hsla"),b.RGBA=c("./rgba"),b.Ident=c("./ident"),b.Group=c("./group"),b.Literal=c("./literal"),b.Boolean=c("./boolean"),b.Return=c("./return"),b.Media=c("./media"),b.QueryList=c("./query-list"),b.Query=c("./query"),b.Feature=c("./feature"),b.Params=c("./params"),b.Comment=c("./comment"),b.Keyframes=c("./keyframes"),b.Member=c("./member"),b.Charset=c("./charset"),b.Namespace=c("./namespace"),b.Import=c("./import"),b.Extend=c("./extend"),b.Object=c("./object"),b.Function=c("./function"),b.Property=c("./property"),b.Selector=c("./selector"),b.Expression=c("./expression"),b.Arguments=c("./arguments"),b.Atblock=c("./atblock"),b.Atrule=c("./atrule"),b.Supports=c("./supports"),b.yes=new b.Boolean(!0),b.no=new b.Boolean(!1),b.nil=new b.Null}),a.register("nodes/keyframes.js",function(a,b,c){var d=c("./atrule"),e=a.exports=function(b,c){d.call(this,"keyframes"),this.segments=b,this.prefix=c||"official"};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b.segments=this.segments.map(function(c){return c.clone(a,b)}),b.prefix=this.prefix,b.block=this.block.clone(a,b),b},e.prototype.toJSON=function(){return{__type:"Keyframes",segments:this.segments,prefix:this.prefix,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},e.prototype.toString=function(){return"@keyframes "+this.segments.join("")}}),a.register("nodes/literal.js",function(a,b,c){var d=c("./node"),e=c("./index"),f=a.exports=function(b){d.call(this),this.val=b,this.string=b,this.prefixed=!1};f.prototype.__proto__=d.prototype,f.prototype.__defineGetter__("hash",function(){return this.val}),f.prototype.toString=function(){return this.val},f.prototype.coerce=function(a){switch(a.nodeName){case"ident":case"string":case"literal":return new f(a.string);default:return d.prototype.coerce.call(this,a)}},f.prototype.operate=function(a,b){var c=b.first;switch(a){case"+":return new e.Literal(this.string+this.coerce(c).string);default:return d.prototype.operate.call(this,a,b)}},f.prototype.toJSON=function(){return{__type:"Literal",val:this.val,string:this.string,prefixed:this.prefixed,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/media.js",function(a,b,c){var d=c("./atrule"),e=a.exports=function(b){d.call(this,"media"),this.val=b};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.val=this.val.clone(a,b),b.block=this.block.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){return{__type:"Media",val:this.val,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},e.prototype.toString=function(){return"@media "+this.val}}),a.register("nodes/query-list.js",function(a,b,c){var d=c("./node"),e=a.exports=function(){d.call(this),this.nodes=[]};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;b.lineno=this.lineno,b.column=this.column,b.filename=this.filename;for(var c=0;c<this.nodes.length;++c)b.push(this.nodes[c].clone(a,b));return b},e.prototype.push=function(a){this.nodes.push(a)},e.prototype.merge=function(a){var c,b=new e;return this.nodes.forEach(function(d){for(var e=0,f=a.nodes.length;e<f;++e)c=d.merge(a.nodes[e]),c&&b.push(c)}),b},e.prototype.toString=function(){return"("+this.nodes.map(function(a){return a.toString()}).join(", ")+")"},e.prototype.toJSON=function(){return{__type:"QueryList",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/query.js",function(a,b,c){var d=c("./node"),e=a.exports=function(){d.call(this),this.nodes=[],this.type="",this.predicate=""};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;b.predicate=this.predicate,b.type=this.type;for(var c=0,d=this.nodes.length;c<d;++c)b.push(this.nodes[c].clone(a,b));return b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.push=function(a){this.nodes.push(a)},e.prototype.__defineGetter__("resolvedType",function(){if(this.type)return this.type.nodeName?this.type.string:this.type}),e.prototype.__defineGetter__("resolvedPredicate",function(){if(this.predicate)return this.predicate.nodeName?this.predicate.string:this.predicate}),e.prototype.merge=function(a){var h,i,b=new e,c=this.resolvedPredicate,d=a.resolvedPredicate,f=this.resolvedType,g=a.resolvedType;if(f=f||g,g=g||f,"not"==c^"not"==d){if(f==g)return;h="not"==c?g:f,i="not"==c?d:c}else if("not"==c&&"not"==d){if(f!=g)return;h=f,i="not"}else{if(f!=g)return;h=f,i=c||d}return b.predicate=i,b.type=h,b.nodes=this.nodes.concat(a.nodes),b},e.prototype.toString=function(){var a=this.predicate?this.predicate+" ":"",b=this.type||"",c=this.nodes.length,d=a+b;return c&&(d+=(b&&" and ")+this.nodes.map(function(a){return a.toString()}).join(" and ")),d},e.prototype.toJSON=function(){return{__type:"Query",predicate:this.predicate,type:this.type,nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/feature.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b){d.call(this),this.segments=b,this.expr=null};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.segments=this.segments.map(function(c){return c.clone(a,b)}),this.expr&&(b.expr=this.expr.clone(a,b)),this.name&&(b.name=this.name),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toString=function(){return this.expr?"("+this.segments.join("")+": "+this.expr.toString()+")":this.segments.join("")},e.prototype.toJSON=function(){var a={__type:"Feature",segments:this.segments,lineno:this.lineno,column:this.column,filename:this.filename};return this.expr&&(a.expr=this.expr),this.name&&(a.name=this.name),a}}),a.register("nodes/node.js",function(a,b,c){function g(a){this.name="CoercionError",this.message=a,Error.captureStackTrace(this,g)}var d=c("../visitor/evaluator"),e=c("../utils"),f=c("./index");g.prototype.__proto__=Error.prototype;var h=a.exports=function(){this.lineno=f.lineno||1,this.column=f.column||1,this.filename=f.filename};h.prototype={constructor:h,get first(){return this},get hash(){return this.val},get nodeName(){return this.constructor.name.toLowerCase()},clone:function(){return this},toJSON:function(){return{lineno:this.lineno,column:this.column,filename:this.filename}},eval:function(){return new d(this).evaluate()},toBoolean:function(){return f.yes},toExpression:function(){if("expression"==this.nodeName)return this;var a=new f.Expression;return a.push(this),a},shouldCoerce:function(a){switch(a){case"is a":case"in":case"||":case"&&":return!1;default:return!0}},operate:function(a,b){switch(a){case"is a":if("string"==b.first.nodeName)return f.Boolean(this.nodeName==b.val);throw new Error('"is a" expects a string, got '+b.toString());case"==":return f.Boolean(this.hash==b.hash);case"!=":return f.Boolean(this.hash!=b.hash);case">=":return f.Boolean(this.hash>=b.hash);case"<=":return f.Boolean(this.hash<=b.hash);case">":return f.Boolean(this.hash>b.hash);case"<":return f.Boolean(this.hash<b.hash);case"||":return this.toBoolean().isTrue?this:b;case"in":var c=e.unwrap(b).nodes,d=c&&c.length,g=this.hash;if(!c)throw new Error('"in" given invalid right-hand operand, expecting an expression');if(1==d&&"object"==c[0].nodeName)return f.Boolean(c[0].has(this.hash));for(var h=0;h<d;++h)if(g==c[h].hash)return f.yes;return f.no;case"&&":var i=this.toBoolean(),j=b.toBoolean();return i.isTrue&&j.isTrue?b:i.isFalse?this:b;default:if("[]"==a)var k="cannot perform "+this+"["+b+"]";else var k="cannot perform "+this+" "+a+" "+b;throw new Error(k)}},coerce:function(a){if(a.nodeName==this.nodeName)return a;throw new g("cannot coerce "+a+" to "+this.nodeName)}}}),a.register("nodes/null.js",function(a,b,c){var d=c("./node"),e=c("./index"),f=a.exports=function(){};f.prototype.__proto__=d.prototype,f.prototype.inspect=f.prototype.toString=function(){return"null"},f.prototype.toBoolean=function(){
return e.no},f.prototype.__defineGetter__("isNull",function(){return!0}),f.prototype.__defineGetter__("hash",function(){return null}),f.prototype.toJSON=function(){return{__type:"Null",lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/params.js",function(a,b,c){var d=c("./node"),e=a.exports=function(){d.call(this),this.nodes=[]};e.prototype.__defineGetter__("length",function(){return this.nodes.length}),e.prototype.__proto__=d.prototype,e.prototype.push=function(a){this.nodes.push(a)},e.prototype.clone=function(a){var b=new e;return b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,this.nodes.forEach(function(c){b.push(c.clone(a,b))}),b},e.prototype.toJSON=function(){return{__type:"Params",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/property.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.segments=b,this.expr=c};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e(this.segments);return b.name=this.name,this.literal&&(b.literal=this.literal),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b.segments=this.segments.map(function(c){return c.clone(a,b)}),this.expr&&(b.expr=this.expr.clone(a,b)),b},e.prototype.toJSON=function(){var a={__type:"Property",segments:this.segments,name:this.name,lineno:this.lineno,column:this.column,filename:this.filename};return this.expr&&(a.expr=this.expr),this.literal&&(a.literal=this.literal),a},e.prototype.toString=function(){return"property("+this.segments.join("")+", "+this.expr+")"},e.prototype.operate=function(a,b,c){return this.expr.operate(a,b,c)}}),a.register("nodes/return.js",function(a,b,c){var d=c("./node"),e=c("./index"),f=a.exports=function(b){this.expr=b||e.nil};f.prototype.__proto__=d.prototype,f.prototype.clone=function(a){var b=new f;return b.expr=this.expr.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},f.prototype.toJSON=function(){return{__type:"Return",expr:this.expr,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/rgba.js",function(a,b,c){function j(a){return Math.max(0,Math.min(a.toFixed(0),255))}function k(a){return Math.max(0,Math.min(a,1))}var d=c("./node"),e=c("./hsla"),f=c("../functions"),g=f.adjust,h=c("./index"),i=b=a.exports=function(b,c,e,f){d.call(this),this.r=j(b),this.g=j(c),this.b=j(e),this.a=k(f),this.name="",this.rgba=this};i.prototype.__proto__=d.prototype,i.withoutClamping=function(a,b,c,d){var e=new i(0,0,0,0);return e.r=a,e.g=b,e.b=c,e.a=d,e},i.prototype.clone=function(){var a=new i(this.r,this.g,this.b,this.a);return a.raw=this.raw,a.name=this.name,a.lineno=this.lineno,a.column=this.column,a.filename=this.filename,a},i.prototype.toJSON=function(){return{__type:"RGBA",r:this.r,g:this.g,b:this.b,a:this.a,raw:this.raw,name:this.name,lineno:this.lineno,column:this.column,filename:this.filename}},i.prototype.toBoolean=function(){return h.yes},i.prototype.__defineGetter__("hsla",function(){return e.fromRGBA(this)}),i.prototype.__defineGetter__("hash",function(){return this.toString()}),i.prototype.add=function(a,b,c,d){return new i(this.r+a,this.g+b,this.b+c,this.a+d)},i.prototype.sub=function(a,b,c,d){return new i(this.r-a,this.g-b,this.b-c,1==d?this.a:this.a-d)},i.prototype.multiply=function(a){return new i(this.r*a,this.g*a,this.b*a,this.a)},i.prototype.divide=function(a){return new i(this.r/a,this.g/a,this.b/a,this.a)},i.prototype.operate=function(a,b){switch("in"!=a&&(b=b.first),a){case"is a":if("string"==b.nodeName&&"color"==b.string)return h.yes;break;case"+":switch(b.nodeName){case"unit":var c=b.val;switch(b.type){case"%":return g(this,new h.String("lightness"),b);case"deg":return this.hsla.adjustHue(c).rgba;default:return this.add(c,c,c,0)}case"rgba":return this.add(b.r,b.g,b.b,b.a);case"hsla":return this.hsla.add(b.h,b.s,b.l)}break;case"-":switch(b.nodeName){case"unit":var c=b.val;switch(b.type){case"%":return g(this,new h.String("lightness"),new h.Unit(-c,"%"));case"deg":return this.hsla.adjustHue(-c).rgba;default:return this.sub(c,c,c,0)}case"rgba":return this.sub(b.r,b.g,b.b,b.a);case"hsla":return this.hsla.sub(b.h,b.s,b.l)}break;case"*":switch(b.nodeName){case"unit":return this.multiply(b.val)}break;case"/":switch(b.nodeName){case"unit":return this.divide(b.val)}}return d.prototype.operate.call(this,a,b)},i.prototype.toString=function(){function a(a){return a<16?"0"+a.toString(16):a.toString(16)}if("transparent"==this.name)return this.name;if(1==this.a){var b=a(this.r),c=a(this.g),d=a(this.b);return b[0]==b[1]&&c[0]==c[1]&&d[0]==d[1]?"#"+b[0]+c[0]+d[0]:"#"+b+c+d}return"rgba("+this.r+","+this.g+","+this.b+","+ +this.a.toFixed(3)+")"},b.fromHSLA=function(a){function l(a){return a<0&&++a,a>1&&--a,6*a<1?g+(f-g)*a*6:2*a<1?f:3*a<2?g+(f-g)*(2/3-a)*6:g}var b=a.h/360,c=a.s/100,d=a.l/100,e=a.a,f=d<=.5?d*(c+1):d+c-d*c,g=2*d-f,h=255*l(b+1/3),j=255*l(b),k=255*l(b-1/3);return new i(h,j,k,e)}}),a.register("nodes/root.js",function(a,b,c){var d=c("./node"),e=a.exports=function(){this.nodes=[]};e.prototype.__proto__=d.prototype,e.prototype.push=function(a){this.nodes.push(a)},e.prototype.unshift=function(a){this.nodes.unshift(a)},e.prototype.clone=function(){var a=new e;return a.lineno=this.lineno,a.column=this.column,a.filename=this.filename,this.nodes.forEach(function(b){a.push(b.clone(a,a))}),a},e.prototype.toString=function(){return"[Root]"},e.prototype.toJSON=function(){return{__type:"Root",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/selector.js",function(a,b,c){var e=(c("./block"),c("./node")),f=a.exports=function(b){e.call(this),this.inherits=!0,this.segments=b,this.optional=!1};f.prototype.__proto__=e.prototype,f.prototype.toString=function(){return this.segments.join("")+(this.optional?" !optional":"")},f.prototype.__defineGetter__("isPlaceholder",function(){return this.val&&~this.val.substr(0,2).indexOf("$")}),f.prototype.clone=function(a){var b=new f;return b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b.inherits=this.inherits,b.val=this.val,b.segments=this.segments.map(function(c){return c.clone(a,b)}),b.optional=this.optional,b},f.prototype.toJSON=function(){return{__type:"Selector",inherits:this.inherits,segments:this.segments,optional:this.optional,val:this.val,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/string.js",function(a,b,c){var d=c("./node"),e=c("../functions").s,f=c("../utils"),g=c("./index"),h=a.exports=function(b,c){d.call(this),this.val=b,this.string=b,this.prefixed=!1,"string"!=typeof c?this.quote="'":this.quote=c};h.prototype.__proto__=d.prototype,h.prototype.toString=function(){return this.quote+this.val+this.quote},h.prototype.clone=function(){var a=new h(this.val,this.quote);return a.lineno=this.lineno,a.column=this.column,a.filename=this.filename,a},h.prototype.toJSON=function(){return{__type:"String",val:this.val,quote:this.quote,lineno:this.lineno,column:this.column,filename:this.filename}},h.prototype.toBoolean=function(){return g.Boolean(this.val.length)},h.prototype.coerce=function(a){switch(a.nodeName){case"string":return a;case"expression":return new h(a.nodes.map(function(a){return this.coerce(a).val},this).join(" "));default:return new h(a.toString())}},h.prototype.operate=function(a,b){switch(a){case"%":var c=new g.Expression;c.push(this);var i="expression"==b.nodeName?f.unwrap(b).nodes:[b];return e.apply(null,[c].concat(i));case"+":var c=new g.Expression;return c.push(new h(this.val+this.coerce(b).val)),c;default:return d.prototype.operate.call(this,a,b)}}}),a.register("nodes/ternary.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c,e){d.call(this),this.cond=b,this.trueExpr=c,this.falseExpr=e};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.cond=this.cond.clone(a,b),b.trueExpr=this.trueExpr.clone(a,b),b.falseExpr=this.falseExpr.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){return{__type:"Ternary",cond:this.cond,trueExpr:this.trueExpr,falseExpr:this.falseExpr,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/unaryop.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.op=b,this.expr=c};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e(this.op);return b.expr=this.expr.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){return{__type:"UnaryOp",op:this.op,expr:this.expr,lineno:this.lineno,column:this.column,filename:this.filename}}}),a.register("nodes/unit.js",function(a,b,c){var d=c("./node"),e=c("./index"),f={mm:{val:1,label:"mm"},cm:{val:10,label:"mm"},in:{val:25.4,label:"mm"},pt:{val:25.4/72,label:"mm"},ms:{val:1,label:"ms"},s:{val:1e3,label:"ms"},Hz:{val:1,label:"Hz"},kHz:{val:1e3,label:"Hz"}},g=a.exports=function(b,c){d.call(this),this.val=b,this.type=c};g.prototype.__proto__=d.prototype,g.prototype.toBoolean=function(){return e.Boolean(!!this.type||this.val)},g.prototype.toString=function(){return this.val+(this.type||"")},g.prototype.clone=function(){var a=new g(this.val,this.type);return a.lineno=this.lineno,a.column=this.column,a.filename=this.filename,a},g.prototype.toJSON=function(){return{__type:"Unit",val:this.val,type:this.type,lineno:this.lineno,column:this.column,filename:this.filename}},g.prototype.operate=function(a,b){var c=this.type||b.first.type;if("rgba"==b.nodeName||"hsla"==b.nodeName)return b.operate(a,this);if(this.shouldCoerce(a))switch(b=b.first,b="%"==this.type||"-"!=a&&"+"!=a||"%"!=b.type?this.coerce(b):new g(this.val*(b.val/100),"%"),a){case"-":return new g(this.val-b.val,c);case"+":return c=c||"%"==b.type&&b.type,new g(this.val+b.val,c);case"/":return new g(this.val/b.val,c);case"*":return new g(this.val*b.val,c);case"%":return new g(this.val%b.val,c);case"**":return new g(Math.pow(this.val,b.val),c);case"..":case"...":var f=this.val,h=b.val,i=new e.Expression,j=".."==a;if(f<h){do i.push(new e.Unit(f));while(j?++f<=h:++f<h)}else do i.push(new e.Unit(f));while(j?--f>=h:--f>h);return i}return d.prototype.operate.call(this,a,b)},g.prototype.coerce=function(a){if("unit"==a.nodeName){var b=this,c=a,g=f[b.type],h=f[c.type];if(g&&h&&g.label==h.label){var i=c.val*(h.val/g.val);return new e.Unit(i,b.type)}return new e.Unit(c.val,b.type)}if("string"==a.nodeName){if("%"==a.val)return new e.Unit(0,"%");var j=parseFloat(a.val);return isNaN(j)&&d.prototype.coerce.call(this,a),new e.Unit(j)}return d.prototype.coerce.call(this,a)}}),a.register("nodes/object.js",function(a,b,c){var d=c("./node"),e=c("./index"),f={}.constructor,g=a.exports=function(){d.call(this),this.vals={}};g.prototype.__proto__=d.prototype,g.prototype.set=function(a,b){return this.vals[a]=b,this},g.prototype.__defineGetter__("length",function(){return f.keys(this.vals).length}),g.prototype.get=function(a){return this.vals[a]||e.nil},g.prototype.has=function(a){return a in this.vals},g.prototype.operate=function(a,b){switch(a){case".":case"[]":return this.get(b.hash);case"==":var f,g,c=this.vals;if("object"!=b.nodeName||this.length!=b.length)return e.no;for(var h in c)if(f=c[h],g=b.vals[h],f.operate(a,g).isFalse)return e.no;return e.yes;case"!=":return this.operate("==",b).negate();default:return d.prototype.operate.call(this,a,b)}},g.prototype.toBoolean=function(){return e.Boolean(this.length)},g.prototype.toBlock=function(){function d(a){return a.nodes?a.nodes.map(d).join(a.isList?",":" "):"literal"==a.nodeName&&","==a.val?"\\,":a.toString()}var b,c,a="{";for(b in this.vals)if(c=this.get(b),"object"==c.first.nodeName)a+=b+" "+c.first.toBlock();else switch(b){case"@charset":a+=b+" "+c.first.toString()+";";break;default:a+=b+":"+d(c)+";"}return a+="}"},g.prototype.clone=function(a){var b=new g;b.lineno=this.lineno,b.column=this.column,b.filename=this.filename;for(var c in this.vals)b.vals[c]=this.vals[c].clone(a,b);return b},g.prototype.toJSON=function(){return{__type:"Object",vals:this.vals,lineno:this.lineno,column:this.column,filename:this.filename}},g.prototype.toString=function(){var a={};for(var b in this.vals)a[b]=this.vals[b].toString();return JSON.stringify(a)}}),a.register("nodes/supports.js",function(a,b,c){var d=c("./atrule"),e=a.exports=function(b){d.call(this,"supports"),this.condition=b};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.condition=this.condition.clone(a,b),b.block=this.block.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){return{__type:"Supports",condition:this.condition,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},e.prototype.toString=function(){return"@supports "+this.condition}}),a.register("nodes/member.js",function(a,b,c){var d=c("./node"),e=a.exports=function(b,c){d.call(this),this.left=b,this.right=c};e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.left=this.left.clone(a,b),b.right=this.right.clone(a,b),this.val&&(b.val=this.val.clone(a,b)),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){var a={__type:"Member",left:this.left,right:this.right,lineno:this.lineno,column:this.column,filename:this.filename};return this.val&&(a.val=this.val),a},e.prototype.toString=function(){return this.left.toString()+"."+this.right.toString()}}),a.register("nodes/atblock.js",function(a,b,c){var d=c("./node"),e=a.exports=function(){d.call(this)};e.prototype.__defineGetter__("nodes",function(){return this.block.nodes}),e.prototype.__proto__=d.prototype,e.prototype.clone=function(a){var b=new e;return b.block=this.block.clone(a,b),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toString=function(){return"@block"},e.prototype.toJSON=function(){return{__type:"Atblock",block:this.block,lineno:this.lineno,column:this.column,fileno:this.fileno}}}),a.register("nodes/atrule.js",function(a,b,c){function f(a){var b=a.nodes;return!b.every(function(a){return"group"==a.nodeName&&a.hasOnlyPlaceholders})&&b.some(function(a){switch(a.nodeName){case"property":case"literal":case"import":return!0;case"block":return f(a);default:if(a.block)return f(a.block)}})}var d=c("./node"),e=a.exports=function(b){d.call(this),this.type=b};e.prototype.__proto__=d.prototype,e.prototype.__defineGetter__("hasOnlyProperties",function(){if(!this.block)return!1;for(var a=this.block.nodes,b=0,c=a.length;b<c;++b){a[b].nodeName;switch(a[b].nodeName){case"property":case"expression":case"comment":continue;default:return!1}}return!0}),e.prototype.clone=function(a){var b=new e(this.type);return this.block&&(b.block=this.block.clone(a,b)),b.segments=this.segments.map(function(c){return c.clone(a,b)}),b.lineno=this.lineno,b.column=this.column,b.filename=this.filename,b},e.prototype.toJSON=function(){var a={__type:"Atrule",type:this.type,segments:this.segments,lineno:this.lineno,column:this.column,filename:this.filename};return this.block&&(a.block=this.block),a},e.prototype.toString=function(){return"@"+this.type},e.prototype.__defineGetter__("hasOutput",function(){return!!this.block&&f(this.block)})}),a.register("parser.js",function(a,b,c){var d=c("./lexer"),e=c("./nodes"),f=c("./token"),g=c("./units"),h=c("./errors"),i=["ident","string","selector","function","comment","boolean","space","color","unit","for","in","[","]","(",")","+","-","*","*=","<",">","=",":","&","&&","~","{","}",".","..","/"],j=["matches","not","dir","lang","any-link","link","visited","local-link","target","scope","hover","active","focus","drop","current","past","future","enabled","disabled","read-only","read-write","placeholder-shown","checked","indeterminate","valid","invalid","in-range","out-of-range","required","optional","user-error","root","empty","blank","nth-child","nth-last-child","first-child","last-child","only-child","nth-of-type","nth-last-of-type","first-of-type","last-of-type","only-of-type","nth-match","nth-last-match","nth-column","nth-last-column","first-line","first-letter","before","after","selection"],k=a.exports=function(b,c){var f=this;c=c||{},this.lexer=new d(b,c),this.prefix=c.prefix||"",this.root=c.root||new e.Root,this.state=["root"],this.stash=[],this.parens=0,this.css=0,this.state.pop=function(){f.prevState=[].pop.call(this)}};k.prototype={constructor:k,currentState:function(){return this.state[this.state.length-1]},previousState:function(){return this.state[this.state.length-2]},parse:function(){for(var a=this.parent=this.root;"eos"!=this.peek().type&&(this.skipWhitespace(),"eos"!=this.peek().type);){var b=this.statement();this.accept(";"),b||this.error("unexpected token {peek}, not allowed at the root level"),a.push(b)}return a},error:function(a){var b=this.peek().type,c=void 0==this.peek().val?"":" "+this.peek().toString();throw c.trim()==b.trim()&&(c=""),new h.ParseError(a.replace("{peek}",'"'+b+c+'"'))},accept:function(a){if(a==this.peek().type)return this.next()},expect:function(a){return a!=this.peek().type&&this.error('expected "'+a+'", got {peek}'),this.next()},next:function(){var a=this.stash.length?this.stash.pop():this.lexer.next(),b=a.lineno,c=a.column||1;return a.val&&a.val.nodeName&&(a.val.lineno=b,a.val.column=c),e.lineno=b,e.column=c,a},peek:function(){return this.lexer.peek()},lookahead:function(a){return this.lexer.lookahead(a)},isSelectorToken:function(a){var b=this.lookahead(a).type;switch(b){case"for":return this.bracketed;case"[":return this.bracketed=!0,!0;case"]":return this.bracketed=!1,!0;default:return~i.indexOf(b)}},isPseudoSelector:function(a){var b=this.lookahead(a).val;return b&&~j.indexOf(b.name)},lineContains:function(a){for(var c,b=1;c=this.lookahead(b++);){if(~["indent","outdent","newline","eos"].indexOf(c.type))return;if(a==c.type)return!0}},selectorToken:function(){if(this.isSelectorToken(1)){if("{"==this.peek().type){if(!this.lineContains("}"))return;for(var b,a=0;b=this.lookahead(++a);){if("}"==b.type){if(2==a||3==a&&"space"==this.lookahead(a-1).type)return;break}if(":"==b.type)return}}return this.next()}},skip:function(a){for(;~a.indexOf(this.peek().type);)this.next()},skipWhitespace:function(){this.skip(["space","indent","outdent","newline"])},skipNewlines:function(){for(;"newline"==this.peek().type;)this.next()},skipSpaces:function(){for(;"space"==this.peek().type;)this.next()},skipSpacesAndComments:function(){for(;"space"==this.peek().type||"comment"==this.peek().type;)this.next()},looksLikeFunctionDefinition:function(a){return"indent"==this.lookahead(a).type||"{"==this.lookahead(a).type},looksLikeSelector:function(a){var c,b=1;if(a&&":"==this.lookahead(b+1).type&&(this.lookahead(b+1).space||"indent"==this.lookahead(b+2).type))return!1;for(;"ident"==this.lookahead(b).type&&("newline"==this.lookahead(b+1).type||","==this.lookahead(b+1).type);)b+=2;for(;this.isSelectorToken(b)||","==this.lookahead(b).type;){if("selector"==this.lookahead(b).type)return!0;if("&"==this.lookahead(b+1).type)return!0;if("."==this.lookahead(b).type&&"ident"==this.lookahead(b+1).type)return!0;if("*"==this.lookahead(b).type&&"newline"==this.lookahead(b+1).type)return!0;if(":"==this.lookahead(b).type&&":"==this.lookahead(b+1).type)return!0;if("color"==this.lookahead(b).type&&"newline"==this.lookahead(b-1).type)return!0;if(this.looksLikeAttributeSelector(b))return!0;if(("="==this.lookahead(b).type||"function"==this.lookahead(b).type)&&"{"==this.lookahead(b+1).type)return!1;if(":"==this.lookahead(b).type&&!this.isPseudoSelector(b+1)&&this.lineContains("."))return!1;if("{"==this.lookahead(b).type?c=!0:"}"==this.lookahead(b).type&&(c=!1),c&&":"==this.lookahead(b).type)return!0;if("space"==this.lookahead(b).type&&"{"==this.lookahead(b+1).type)return!0;if(":"==this.lookahead(b++).type&&!this.lookahead(b-1).space&&this.isPseudoSelector(b))return!0;if("space"==this.lookahead(b).type&&"newline"==this.lookahead(b+1).type&&"{"==this.lookahead(b+2).type)return!0;if(","==this.lookahead(b).type&&"newline"==this.lookahead(b+1).type)return!0}if(","==this.lookahead(b).type&&"newline"==this.lookahead(b+1).type)return!0;if("{"==this.lookahead(b).type&&"newline"==this.lookahead(b+1).type)return!0;if(this.css&&(";"==this.lookahead(b).type||"}"==this.lookahead(b-1).type))return!1;for(;!~["indent","outdent","newline","for","if",";","}","eos"].indexOf(this.lookahead(b).type);)++b;return"indent"==this.lookahead(b).type||void 0},looksLikeAttributeSelector:function(a){var b=this.lookahead(a).type;return!("="!=b||!this.bracketed)||("ident"==b||"string"==b)&&"]"==this.lookahead(a+1).type&&("newline"==this.lookahead(a+2).type||this.isSelectorToken(a+2))&&!this.lineContains(":")&&!this.lineContains("=")},looksLikeKeyframe:function(){var b,a=2;switch(this.lookahead(a).type){case"{":case"indent":case",":return!0;case"newline":for(;"unit"==this.lookahead(++a).type||"newline"==this.lookahead(a).type;);return b=this.lookahead(a).type,"indent"==b||"{"==b}},stateAllowsSelector:function(){switch(this.currentState()){case"root":case"atblock":case"selector":case"conditional":case"function":case"atrule":case"for":return!0}},assignAtblock:function(a){try{a.push(this.atblock(a))}catch(a){this.error("invalid right-hand side operand in assignment, got {peek}")}},statement:function(){var c,d,a=this.stmt(),b=this.prevState;switch(this.allowPostfix&&(this.allowPostfix=!1,b="expression"),b){case"assignment":case"expression":case"function arguments":for(;d=this.accept("if")||this.accept("unless")||this.accept("for");)switch(d.type){case"if":case"unless":a=new e.If(this.expression(),a),a.postfix=!0,a.negate="unless"==d.type,this.accept(";");break;case"for":var f,g=this.id().name;this.accept(",")&&(f=this.id().name),this.expect("in");var h=new e.Each(g,f,this.expression());c=new e.Block(this.parent,h),c.push(a),h.block=c,a=h}}return a},stmt:function(){var a=this.peek().type;switch(a){case"keyframes":return this.keyframes();case"-moz-document":return this.mozdocument();case"comment":case"selector":case"extend":case"literal":case"charset":case"namespace":case"require":case"extend":case"media":case"atrule":case"ident":case"scope":case"supports":case"unless":return this[a]();case"function":return this.fun();case"import":return this.atimport();case"if":return this.ifstmt();case"for":return this.forin();case"return":return this.ret();case"{":return this.property();default:if(this.stateAllowsSelector())switch(a){case"color":case"~":case">":case"<":case":":case"&":case"&&":case"[":case".":case"/":return this.selector();case"..":if("/"==this.lookahead(2).type)return this.selector();case"+":return"function"==this.lookahead(2).type?this.functionCall():this.selector();case"*":return this.property();case"unit":if(this.looksLikeKeyframe())return this.selector();case"-":if("{"==this.lookahead(2).type)return this.property()}var b=this.expression();return b.isEmpty&&this.error("unexpected {peek}"),b}},block:function(a,b){var c,d,f,g=this.parent=new e.Block(this.parent,a);for(!1===b&&(g.scope=!1),this.accept("newline"),this.accept("{")?(this.css++,c="}",this.skipWhitespace()):(c="outdent",this.expect("indent"));c!=this.peek().type;){if(this.css){if(this.accept("newline")||this.accept("indent"))continue;d=this.statement(),this.accept(";"),this.skipWhitespace()}else{if(this.accept("newline"))continue;if(f=this.lookahead(2).type,"indent"==this.peek().type&&~["outdent","newline","comment"].indexOf(f)){this.skip(["indent","outdent"]);continue}if("eos"==this.peek().type)return g;d=this.statement(),this.accept(";")}d||this.error("unexpected token {peek} in block"),g.push(d)}return this.css?(this.skipWhitespace(),this.expect("}"),this.skipSpaces(),this.css--):this.expect("outdent"),this.parent=g.parent,g},comment:function(){var a=this.next().val;return this.skipSpaces(),a},forin:function(){this.expect("for");var a,b=this.id().name;this.accept(",")&&(a=this.id().name),this.expect("in"),this.state.push("for"),this.cond=!0;var c=new e.Each(b,a,this.expression());return this.cond=!1,c.block=this.block(c,!1),this.state.pop(),c},ret:function(){this.expect("return");var a=this.expression();return a.isEmpty?new e.Return:new e.Return(a)},unless:function(){this.expect("unless"),this.state.push("conditional"),this.cond=!0;var a=new e.If(this.expression(),!0);return this.cond=!1,a.block=this.block(a,!1),this.state.pop(),a},ifstmt:function(){this.expect("if"),this.state.push("conditional"),this.cond=!0;var b,c,a=new e.If(this.expression());for(this.cond=!1,a.block=this.block(a,!1),this.skip(["newline","comment"]);this.accept("else");){if(!this.accept("if")){a.elses.push(this.block(a,!1));break}this.cond=!0,b=this.expression(),this.cond=!1,c=this.block(a,!1),a.elses.push(new e.If(b,c)),this.skip(["newline","comment"])}return this.state.pop(),a},atblock:function(a){return a||this.expect("atblock"),a=new e.Atblock,this.state.push("atblock"),a.block=this.block(a,!1),this.state.pop(),a},atrule:function(){var c,a=this.expect("atrule").val,b=new e.Atrule(a);return this.skipSpacesAndComments(),b.segments=this.selectorParts(),this.skipSpacesAndComments(),c=this.peek().type,("indent"==c||"{"==c||"newline"==c&&"{"==this.lookahead(2).type)&&(this.state.push("atrule"),b.block=this.block(b),this.state.pop()),b},scope:function(){this.expect("scope");var a=this.selectorParts().map(function(a){return a.val}).join("");return this.selectorScope=a.trim(),e.nil},supports:function(){this.expect("supports");var a=new e.Supports(this.supportsCondition());return this.state.push("atrule"),a.block=this.block(a),this.state.pop(),a},supportsCondition:function(){var a=this.supportsNegation()||this.supportsOp();return a||(this.cond=!0,a=this.expression(),this.cond=!1),a},supportsNegation:function(){if(this.accept("not")){var a=new e.Expression;return a.push(new e.Literal("not")),a.push(this.supportsFeature()),a}},supportsOp:function(){var b,c,a=this.supportsFeature();if(a){for(c=new e.Expression,c.push(a);b=this.accept("&&")||this.accept("||");)c.push(new e.Literal("&&"==b.val?"and":"or")),c.push(this.supportsFeature());return c}},supportsFeature:function(){if(this.skipSpacesAndComments(),"("==this.peek().type){var a=this.lookahead(2).type;if("ident"==a||"{"==a)return this.feature();this.expect("(");var b=new e.Expression;return b.push(new e.Literal("(")),b.push(this.supportsCondition()),this.expect(")"),b.push(new e.Literal(")")),this.skipSpacesAndComments(),b}},extend:function(){var c,d,f,a=this.expect("extend"),b=[];do f=this.selectorParts(),f.length&&(c=new e.Selector(f),b.push(c),"!"===this.peek().type&&(a=this.lookahead(2),"ident"===a.type&&"optional"===a.val.name&&(this.skip(["!","ident"]),c.optional=!0)));while(this.accept(","));return d=new e.Extend(b),d.lineno=a.lineno,d.column=a.column,d},media:function(){this.expect("media"),this.state.push("atrule");var a=new e.Media(this.queries());return a.block=this.block(a),this.state.pop(),a},queries:function(){var a=new e.QueryList,b=["comment","newline","space"];do this.skip(b),a.push(this.query()),this.skip(b);while(this.accept(","));return a},query:function(){var b,c,d,a=new e.Query;if("ident"==this.peek().type&&("."==this.lookahead(2).type||"["==this.lookahead(2).type))return this.cond=!0,b=this.expression(),this.cond=!1,a.push(new e.Feature(b.nodes)),a;if((c=this.accept("ident")||this.accept("not"))&&(c=new e.Literal(c.val.string||c.val),this.skipSpacesAndComments(),(d=this.accept("ident"))?(a.type=d.val,a.predicate=c):a.type=c,this.skipSpacesAndComments(),!this.accept("&&")))return a;do a.push(this.feature());while(this.accept("&&"));return a},feature:function(){this.skipSpacesAndComments(),this.expect("("),this.skipSpacesAndComments();var a=new e.Feature(this.interpolate());return this.skipSpacesAndComments(),this.accept(":"),this.skipSpacesAndComments(),this.inProperty=!0,a.expr=this.list(),this.inProperty=!1,this.skipSpacesAndComments(),this.expect(")"),this.skipSpacesAndComments(),a},mozdocument:function(){this.expect("-moz-document");var a=new e.Atrule("-moz-document"),b=[];do this.skipSpacesAndComments(),b.push(this.functionCall()),this.skipSpacesAndComments();while(this.accept(","));return a.segments=[new e.Literal(b.join(", "))],this.state.push("atrule"),a.block=this.block(a,!1),this.state.pop(),a},atimport:function(){return this.expect("import"),this.allowPostfix=!0,new e.Import(this.expression(),!1)},require:function(){return this.expect("require"),this.allowPostfix=!0,new e.Import(this.expression(),!0)},charset:function(){this.expect("charset");var a=this.expect("string").val;return this.allowPostfix=!0,new e.Charset(a)},namespace:function(){var a,b;return this.expect("namespace"),this.skipSpacesAndComments(),(b=this.accept("ident"))&&(b=b.val),this.skipSpacesAndComments(),a=this.accept("string")||this.url(),this.allowPostfix=!0,new e.Namespace(a,b)},keyframes:function(){var b,a=this.expect("keyframes");return this.skipSpacesAndComments(),b=new e.Keyframes(this.selectorParts(),a.val),this.skipSpacesAndComments(),this.state.push("atrule"),b.block=this.block(b),this.state.pop(),b},literal:function(){return this.expect("literal").val},id:function(){var a=this.expect("ident");return this.accept("space"),a.val},ident:function(){for(var a=2,b=this.lookahead(a).type;"space"==b;)b=this.lookahead(++a).type;switch(b){case"=":case"?=":case"-=":case"+=":case"*=":case"/=":case"%=":return this.assignment();case".":if("space"==this.lookahead(a-1).type)return this.selector();if(this._ident==this.peek())return this.id();for(;"="!=this.lookahead(++a).type&&!~["[",",","newline","indent","eos"].indexOf(this.lookahead(a).type););if("="==this.lookahead(a).type)return this._ident=this.peek(),this.expression();if(this.looksLikeSelector()&&this.stateAllowsSelector())return this.selector();case"[":if(this._ident==this.peek())return this.id();for(;"]"!=this.lookahead(a++).type&&"selector"!=this.lookahead(a).type&&"eos"!=this.lookahead(a).type;);if("="==this.lookahead(a).type)return this._ident=this.peek(),this.expression();if(this.looksLikeSelector()&&this.stateAllowsSelector())return this.selector();case"-":case"+":case"/":case"*":case"%":case"**":case"&&":case"||":case">":case"<":case">=":case"<=":case"!=":case"==":case"?":case"in":case"is a":case"is defined":if(this._ident==this.peek())return this.id();switch(this._ident=this.peek(),this.currentState()){case"for":case"selector":return this.property();case"root":case"atblock":case"atrule":return"["==b?this.subscript():this.selector();case"function":case"conditional":return this.looksLikeSelector()?this.selector():this.expression();default:return this.operand?this.id():this.expression()}default:switch(this.currentState()){case"root":return this.selector();case"for":case"selector":case"function":case"conditional":case"atblock":case"atrule":return this.property();default:var c=this.id();return"interpolation"==this.previousState()&&(c.mixin=!0),c}}},interpolate:function(){var a,c,b=[];for(c=this.accept("*"),c&&b.push(new e.Literal("*"));;)if(this.accept("{"))this.state.push("interpolation"),b.push(this.expression()),this.expect("}"),this.state.pop();else if(a=this.accept("-"))b.push(new e.Literal("-"));else{if(!(a=this.accept("ident")))break;b.push(a.val)}return b.length||this.expect("ident"),b},property:function(){if(this.looksLikeSelector(!0))return this.selector();var a=this.interpolate(),b=new e.Property(a),c=b;return this.accept("space"),this.accept(":")&&this.accept("space"),this.state.push("property"),this.inProperty=!0,b.expr=this.list(),b.expr.isEmpty&&(c=a[0]),this.inProperty=!1,this.allowPostfix=!0,this.state.pop(),this.accept(";"),c},selector:function(){var a,f,b=new e.Group,c=this.selectorScope,d="root"==this.currentState();do this.accept("newline"),a=this.selectorParts(),d&&c&&a.unshift(new e.Literal(c+" ")),a.length&&(f=new e.Selector(a),f.lineno=a[0].lineno,f.column=a[0].column,b.push(f));while(this.accept(",")||this.accept("newline"));return"selector-parts"==this.currentState()?b.nodes:(this.state.push("selector"),
b.block=this.block(b),this.state.pop(),b)},selectorParts:function(){for(var a,b=[];a=this.selectorToken();)switch(a.type){case"{":this.skipSpaces();var c=this.expression();this.skipSpaces(),this.expect("}"),b.push(c);break;case this.prefix&&".":var d=new e.Literal(a.val+this.prefix);d.prefixed=!0,b.push(d);break;case"comment":break;case"color":case"unit":b.push(new e.Literal(a.val.raw));break;case"space":b.push(new e.Literal(" "));break;case"function":b.push(new e.Literal(a.val.name+"("));break;case"ident":b.push(new e.Literal(a.val.name||a.val.string));break;default:b.push(new e.Literal(a.val)),a.space&&b.push(new e.Literal(" "))}return b},assignment:function(){var a,b,c=this.id().name;if(a=this.accept("=")||this.accept("?=")||this.accept("+=")||this.accept("-=")||this.accept("*=")||this.accept("/=")||this.accept("%=")){this.state.push("assignment");var d=this.list();switch(d.isEmpty&&this.assignAtblock(d),b=new e.Ident(c,d),this.state.pop(),a.type){case"?=":var f=new e.BinOp("is defined",b),g=new e.Expression;g.push(new e.Ident(c)),b=new e.Ternary(f,g,b);break;case"+=":case"-=":case"*=":case"/=":case"%=":b.val=new e.BinOp(a.type[0],new e.Ident(c),d)}}return b},fun:function(){var c,a=1,b=2;a:for(;c=this.lookahead(b++);)switch(c.type){case"function":case"(":++a;break;case")":if(!--a)break a;break;case"eos":this.error('failed to find closing paren ")"')}switch(this.currentState()){case"expression":return this.functionCall();default:return this.looksLikeFunctionDefinition(b)?this.functionDefinition():this.expression()}},url:function(){this.expect("function"),this.state.push("function arguments");var a=this.args();return this.expect(")"),this.state.pop(),new e.Call("url",a)},functionCall:function(){var a=this.accept("+");if("url"==this.peek().val.name)return this.url();var b=this.expect("function").val.name;this.state.push("function arguments"),this.parens++;var c=this.args();this.expect(")"),this.parens--,this.state.pop();var d=new e.Call(b,c);return a&&(this.state.push("function"),d.block=this.block(d),this.state.pop()),d},functionDefinition:function(){var a=this.expect("function").val.name;this.state.push("function params"),this.skipWhitespace();var b=this.params();this.skipWhitespace(),this.expect(")"),this.state.pop(),this.state.push("function");var c=new e.Function(a,b);return c.block=this.block(c),this.state.pop(),new e.Ident(a,c)},params:function(){for(var a,b,c=new e.Params;a=this.accept("ident");)this.accept("space"),c.push(b=a.val),this.accept("...")?b.rest=!0:this.accept("=")&&(b.val=this.expression()),this.skipWhitespace(),this.accept(","),this.skipWhitespace();return c},args:function(){var b,a=new e.Arguments;do"ident"==this.peek().type&&":"==this.lookahead(2).type?(b=this.next().val.string,this.expect(":"),a.map[b]=this.expression()):a.push(this.expression());while(this.accept(","));return a},list:function(){for(var a=this.expression();this.accept(",");)if(a.isList)b.push(this.expression());else{var b=new e.Expression(!0);b.push(a),b.push(this.expression()),a=b}return a},expression:function(){var a,b=new e.Expression;for(this.state.push("expression");a=this.negation();)a||this.error("unexpected token {peek} in expression"),b.push(a);return this.state.pop(),b.nodes.length&&(b.lineno=b.nodes[0].lineno,b.column=b.nodes[0].column),b},negation:function(){return this.accept("not")?new e.UnaryOp("!",this.negation()):this.ternary()},ternary:function(){var a=this.logical();if(this.accept("?")){var b=this.expression();this.expect(":");var c=this.expression();a=new e.Ternary(a,b,c)}return a},logical:function(){for(var a,b=this.typecheck();a=this.accept("&&")||this.accept("||");)b=new e.BinOp(a.type,b,this.typecheck());return b},typecheck:function(){for(var a,b=this.equality();a=this.accept("is a");)this.operand=!0,b||this.error('illegal unary "'+a+'", missing left-hand operand'),b=new e.BinOp(a.type,b,this.equality()),this.operand=!1;return b},equality:function(){for(var a,b=this.inop();a=this.accept("==")||this.accept("!=");)this.operand=!0,b||this.error('illegal unary "'+a+'", missing left-hand operand'),b=new e.BinOp(a.type,b,this.inop()),this.operand=!1;return b},inop:function(){for(var a=this.relational();this.accept("in");)this.operand=!0,a||this.error('illegal unary "in", missing left-hand operand'),a=new e.BinOp("in",a,this.relational()),this.operand=!1;return a},relational:function(){for(var a,b=this.range();a=this.accept(">=")||this.accept("<=")||this.accept("<")||this.accept(">");)this.operand=!0,b||this.error('illegal unary "'+a+'", missing left-hand operand'),b=new e.BinOp(a.type,b,this.range()),this.operand=!1;return b},range:function(){var a,b=this.additive();return(a=this.accept("...")||this.accept(".."))&&(this.operand=!0,b||this.error('illegal unary "'+a+'", missing left-hand operand'),b=new e.BinOp(a.val,b,this.additive()),this.operand=!1),b},additive:function(){for(var a,b=this.multiplicative();a=this.accept("+")||this.accept("-");)this.operand=!0,b=new e.BinOp(a.type,b,this.multiplicative()),this.operand=!1;return b},multiplicative:function(){for(var a,b=this.defined();a=this.accept("**")||this.accept("*")||this.accept("/")||this.accept("%");){if(this.operand=!0,"/"==a&&this.inProperty&&!this.parens)return this.stash.push(new f("literal",new e.Literal("/"))),this.operand=!1,b;b||this.error('illegal unary "'+a+'", missing left-hand operand'),b=new e.BinOp(a.type,b,this.defined()),this.operand=!1}return b},defined:function(){var a=this.unary();return this.accept("is defined")&&(a||this.error('illegal unary "is defined", missing left-hand operand'),a=new e.BinOp("is defined",a)),a},unary:function(){var a,b;return(a=this.accept("!")||this.accept("~")||this.accept("+")||this.accept("-"))?(this.operand=!0,b=this.unary(),b||this.error('illegal unary "'+a+'"'),b=new e.UnaryOp(a.type,b),this.operand=!1,b):this.subscript()},subscript:function(){for(var a=this.member();this.accept("[");)a=new e.BinOp("[]",a,this.expression()),this.expect("]");return this.accept("=")&&(a.op+="=",a.val=this.list(),a.val.isEmpty&&this.assignAtblock(a.val)),a},member:function(){var a=this.primary();if(a){for(;this.accept(".");){var b=new e.Ident(this.expect("ident").val.string);a=new e.Member(a,b)}this.skipSpaces(),this.accept("=")&&(a.val=this.list(),a.val.isEmpty&&this.assignAtblock(a.val))}return a},object:function(){var b,c,d,a=new e.Object;for(this.expect("{"),this.skipWhitespace();!this.accept("}");)this.accept("comment")||this.accept("newline")||(d||this.accept(","),b=this.accept("ident")||this.accept("string"),b||this.error('expected "ident" or "string", got {peek}'),b=b.val.hash,this.skipSpacesAndComments(),this.expect(":"),c=this.expression(),a.set(b,c),d=this.accept(","),this.skipWhitespace());return a},primary:function(){var a;if(this.skipSpaces(),this.accept("(")){++this.parens;var b=this.expression(),c=this.expect(")");return--this.parens,this.accept("%")&&b.push(new e.Ident("%")),a=this.peek(),!c.space&&"ident"==a.type&&~g.indexOf(a.val.string)&&(b.push(new e.Ident(a.val.string)),this.next()),b}switch(a=this.peek(),a.type){case"null":case"unit":case"color":case"string":case"literal":case"boolean":case"comment":return this.next().val;case!this.cond&&"{":return this.object();case"atblock":return this.atblock();case"atrule":var d=new e.Ident(this.next().val);return d.property=!0,d;case"ident":return this.ident();case"function":return a.anonymous?this.functionDefinition():this.functionCall()}}}}),a.register("renderer.js",function(a,b,c){function j(a,b){b=b||{},b.globals=b.globals||{},b.functions=b.functions||{},b.use=b.use||[],b.use=Array.isArray(b.use)?b.use:[b.use],b.imports=[],b.paths=b.paths||[],b.filename=b.filename||"stylus",b.Evaluator=b.Evaluator||e,this.options=b,this.str=a}var d=c("./parser"),e=c("./visitor/evaluator"),f=c("./visitor/normalizer"),g=c("./utils"),h=c("./nodes");c("./path").join;a.exports=j,j.prototype.render=function(a){for(var b=this.parser=new d(this.str,this.options),e=0,i=this.options.use.length;e<i;e++)this.use(this.options.use[e]);try{h.filename=this.options.filename;var j=b.parse();this.evaluator=new this.options.Evaluator(j,this.options),this.nodes=h,this.evaluator.renderer=this,j=this.evaluator.evaluate();var k=new f(j,this.options);j=k.normalize();var l=this.options.sourcemap?new(c("./visitor/sourcemapper"))(j,this.options):new(c("./visitor/compiler"))(j,this.options),m=l.compile();this.options.sourcemap&&(this.sourcemap=l.map.toJSON())}catch(c){var n={};if(n.input=c.input||this.str,n.filename=c.filename||this.options.filename,n.lineno=c.lineno||b.lexer.lineno,n.column=c.column||b.lexer.column,!a)throw g.formatException(c,n);return a(g.formatException(c,n))}return a?void a(null,m):m},j.prototype.deps=function(a){var b=g.merge({cache:!1},this.options);a&&(b.filename=a);var e=c("./visitor/deps-resolver"),f=new d(this.str,b);try{h.filename=b.filename;var i=f.parse(),j=new e(i,b);return j.resolve()}catch(a){var k={};throw k.input=a.input||this.str,k.filename=a.filename||b.filename,k.lineno=a.lineno||f.lexer.lineno,k.column=a.column||f.lexer.column,g.formatException(a,k)}},j.prototype.set=function(a,b){return this.options[a]=b,this},j.prototype.get=function(a){return this.options[a]},j.prototype.include=function(a){return this.options.paths.push(a),this},j.prototype.use=function(a){return a.call(this,this),this},j.prototype.define=function(a,b,c){return b=g.coerce(b,c),b.nodeName?(this.options.globals[a]=b,this):(this.options.functions[a]=b,void 0!=c&&(b.raw=c),this)}}),a.register("selector-parser.js",function(a,b,c){var d=[">","+","~"],e=a.exports=function(b,c,d){this.str=b,this.stack=c||[],this.parts=d||[],this.pos=0,this.level=2,this.nested=!0,this.ignore=!1};e.prototype.skip=function(a){this.str=this.str.substr(a),this.pos+=a},e.prototype.skipSpaces=function(){for(;" "==this.str[0];)this.skip(1)},e.prototype.advance=function(){return this.root()||this.relative()||this.initial()||this.escaped()||this.parent()||this.partial()||this.char()},e.prototype.root=function(){this.pos||"/"!=this.str[0]||"deep"==this.str.slice(1,5)||(this.nested=!1,this.skip(1))},e.prototype.relative=function(a){if((!this.pos||a)&&"../"==this.str.slice(0,3)){for(this.nested=!1,this.skip(3);this.relative(!0);)this.level++;if(!this.raw){var b=this.stack[this.stack.length-this.level];if(b)return b;this.ignore=!0}}},e.prototype.initial=function(){if(!this.pos&&"~"==this.str[0]&&"/"==this.str[1])return this.nested=!1,this.skip(2),this.stack[0]},e.prototype.escaped=function(){if("\\"==this.str[0]){var a=this.str[1];if("&"==a||"^"==a)return this.skip(2),a}},e.prototype.parent=function(){if("&"==this.str[0]){if(this.nested=!1,!this.pos&&(!this.stack.length||this.raw)){for(var a=0;" "==this.str[++a];);if(~d.indexOf(this.str[a]))return void this.skip(a+1)}if(this.skip(1),!this.raw)return this.stack[this.stack.length-1]}},e.prototype.partial=function(){if("^"==this.str[0]&&"["==this.str[1]){this.skip(2),this.skipSpaces();var a=this.range();if(this.skipSpaces(),"]"!=this.str[0])return"^[";if(this.nested=!1,this.skip(1),a)return a;this.ignore=!0}},e.prototype.number=function(){var a=0,b="";for("-"==this.str[a]&&(b+=this.str[a++]);this.str.charCodeAt(a)>=48&&this.str.charCodeAt(a)<=57;)b+=this.str[a++];if(b)return this.skip(a),Number(b)},e.prototype.range=function(){var b,a=this.number();if(".."==this.str.slice(0,2)){this.skip(2);var c=this.number(),d=this.parts.length;if(a<0&&(a=d+a-1),c<0&&(c=d+c-1),a>c){var f=a;a=c,c=f}c<d-1&&(b=this.parts.slice(a,c+1).map(function(a){var b=new e(a,this.stack,this.parts);return b.raw=!0,b.parse()},this).map(function(a){return(a.nested?" ":"")+a.val}).join("").trim())}else b=this.stack[a<0?this.stack.length+a-1:a];return b?b:void(this.ignore=!0)},e.prototype.char=function(){var a=this.str[0];return this.skip(1),a},e.prototype.parse=function(){for(var a="";this.str.length;)if(a+=this.advance()||"",this.ignore){a="";break}return{val:a.trimRight(),nested:this.nested}}}),a.register("stack/index.js",function(a,b,c){var d=a.exports=function(){Array.apply(this,arguments)};d.prototype.__proto__=Array.prototype,d.prototype.push=function(a){return a.stack=this,a.parent=this.currentFrame,[].push.apply(this,arguments)},d.prototype.__defineGetter__("currentFrame",function(){return this[this.length-1]}),d.prototype.getBlockFrame=function(a){for(var b=0;b<this.length;++b)if(a==this[b].block)return this[b]},d.prototype.lookup=function(a){var c,b=this.currentFrame.block;do{var e=this.getBlockFrame(b);if(e&&(c=e.lookup(a)))return c}while(b=b.parent)},d.prototype.inspect=function(){return this.reverse().map(function(a){return a.inspect()}).join("\n")},d.prototype.toString=function(){for(var a,b,d,c=[],e=this.length;e--;)if(a=this[e].block,b=a.node)switch(d="("+b.filename+":"+(b.lineno+1)+":"+b.column+")",b.nodeName){case"function":c.push("    at "+b.name+"() "+d);break;case"group":c.push('    at "'+b.nodes[0].val+'" '+d)}return c.join("\n")}}),a.register("stack/frame.js",function(a,b,c){var d=c("./scope"),e=a.exports=function(b){this._scope=!1===b.scope?null:new d,this.block=b};e.prototype.__defineGetter__("scope",function(){return this._scope||this.parent.scope}),e.prototype.lookup=function(a){return this.scope.lookup(a)},e.prototype.inspect=function(){return"[Frame "+(!1===this.block.scope?"scope-less":this.scope.inspect())+"]"}}),a.register("stack/scope.js",function(a,b,c){var d=a.exports=function(){this.locals={}};d.prototype.add=function(a){this.locals[a.name]=a.val},d.prototype.lookup=function(a){return this.locals[a]},d.prototype.inspect=function(){var a=Object.keys(this.locals).map(function(a){return"@"+a});return"[Scope"+(a.length?" "+a.join(", "):"")+"]"}}),a.register("stylus.js",function(a,c,d){function h(a,c){return b&&(a=b+a),new e(a,c)}var e=d("./renderer"),f=d("./nodes");d("./utils");c=a.exports=h,c.version="0.54.5",c.nodes=f,c.functions=d("./functions"),c.utils=d("./utils"),c.Visitor=d("./visitor"),c.Parser=d("./parser"),c.Evaluator=d("./visitor/evaluator"),c.Normalizer=d("./visitor/normalizer"),c.Compiler=d("./visitor/compiler"),c.render=function(a,c,d){return"function"==typeof c&&(d=c,c={}),b&&(a=b+a),new e(a,c).render(d)},c.url=d("./functions/url")}),a.register("token.js",function(a,b,c){var d=b=a.exports=function(b,c){this.type=b,this.val=c};d.prototype.inspect=function(){var a=" "+this.val;return"[Token:"+this.lineno+":"+this.column+" [32m"+this.type+"[0m[33m"+(this.val?a:"")+"[0m]"},d.prototype.toString=function(){return(void 0===this.val?this.type:this.val).toString()}}),a.register("utils.js",function(a,b,c){var d=c("./nodes"),e=c("./path").join,f=c("./path").isAbsolute;b.absolute=f||function(a){return"\\\\"==a.substr(0,2)||"/"===a.charAt(0)||/^[a-z]:[\\\/]/i.test(a)},b.lookup=function(a,c,d){var f,g=c.length;if(b.absolute(a))try{return a}catch(a){}for(;g--;)try{if(f=e(c[g],a),d==f)continue;return f}catch(a){}},b.find=function(a,c,d){var f,g,h=c.length;if(b.absolute(a)&&(g=glob.sync(a)).length)return g;for(;h--;)if(f=e(c[h],a),d!=f&&(g=glob.sync(f)).length)return g},b.lookupIndex=function(a,d,f){function h(a){var i=b.lookup(e(a,"package.json"),d,f);if(!i)return/\.styl$/i.test(a)?b.lookupIndex(a,d,f):h(a+".styl");var j=c(relative(__dirname,i)).main;return g=j?b.find(e(a,j),d,f):b.lookupIndex(a,d,f)}var g=b.find(e(a,"index.styl"),d,f);return g||(g=b.find(e(a,basename(a).replace(/\.styl/i,"")+".styl"),d,f)),g||~a.indexOf("node_modules")||(g=h(e("node_modules",a))),g},b.formatException=function(a,b){var c=b.lineno,d=b.column,e=b.filename,f=b.input,g=b.context||8,g=g/2,h=("\n"+f).split("\n"),i=Math.max(c-g,1),j=Math.min(h.length,c+g),k=j.toString().length,g=h.slice(i,j).map(function(a,b){var e=b+i;return"   "+Array(k-e.toString().length+1).join(" ")+e+"| "+a+(e==c?"\n"+Array(e.toString().length+5+d).join("-")+"^":"")}).join("\n");return a.message=e+":"+c+":"+d+"\n"+g+"\n\n"+a.message+"\n"+(a.stylusStack?a.stylusStack+"\n":""),a.fromStylus&&(a.stack="Error: "+a.message),a},b.assertType=function(a,c,d){if(b.assertPresent(a,d),a.nodeName!=c){var e=a.nodeName,f="expected "+(d?'"'+d+'" to be a ':"")+c+", but got "+e+":"+a;throw new Error("TypeError: "+f)}},b.assertString=function(a,c){switch(b.assertPresent(a,c),a.nodeName){case"string":case"ident":case"literal":return;default:var d=a.nodeName,e="expected string, ident or literal, but got "+d+":"+a;throw new Error("TypeError: "+e)}},b.assertColor=function(a,c){switch(b.assertPresent(a,c),a.nodeName){case"rgba":case"hsla":return;default:var d=a.nodeName,e="expected rgba or hsla, but got "+d+":"+a;throw new Error("TypeError: "+e)}},b.assertPresent=function(a,b){if(!a){if(b)throw new Error('"'+b+'" argument required');throw new Error("argument missing")}},b.unwrap=function(a){return a.preserve?a:"arguments"!=a.nodeName&&"expression"!=a.nodeName?a:1!=a.nodes.length?a:"arguments"!=a.nodes[0].nodeName&&"expression"!=a.nodes[0].nodeName?a:b.unwrap(a.nodes[0])},b.coerce=function(a,c){switch(typeof a){case"function":return a;case"string":return new d.String(a);case"boolean":return new d.Boolean(a);case"number":return new d.Unit(a);default:return null==a?d.nil:Array.isArray(a)?b.coerceArray(a,c):a.nodeName?a:b.coerceObject(a,c)}},b.coerceArray=function(a,c){var e=new d.Expression;return a.forEach(function(a){e.push(b.coerce(a,c))}),e},b.coerceObject=function(a,c){var f,e=c?new d.Object:new d.Expression;for(var g in a)f=b.coerce(a[g],c),g=new d.Ident(g),c?e.set(g,f):e.push(b.coerceArray([g,f]));return e},b.params=function(a){return a.toString().match(/\(([^)]*)\)/)[1].split(/ *, */)},b.merge=function(a,c,d){for(var e in c)if(d&&a[e]){var f=b.unwrap(a[e]).first,g=b.unwrap(c[e]).first;"object"==f.nodeName&&"object"==g.nodeName?a[e].first.vals=b.merge(f.vals,g.vals,d):a[e]=c[e]}else a[e]=c[e];return a},b.uniq=function(a){for(var b={},c=[],d=0,e=a.length;d<e;++d)a[d]in b||(b[a[d]]=!0,c.push(a[d]));return c},b.compileSelectors=function(a,d){function i(a,b){var c=[a.val],d=new f(c[0],e,c).parse().val,e=[];if(b.length)for(var g=0,h=b.length;g<h;++g){c.push(b[g]),e.push(d);var i=new f(b[g],e,c).parse();i.nested?d+=" "+i.val:d=i.val}return d.trim()}function j(a,b){b?a[b].forEach(function(c){!d&&c.isPlaceholder||(c.inherits?(h.unshift(c.val),j(a,b-1),h.shift()):e.push(g+i(c,h)))}):a[0].forEach(function(a){if(d||!a.isPlaceholder){var b=i(a,h);b&&e.push(g+b)}})}var e=[],f=c("./selector-parser"),g=this.indent||"",h=[];return j(a,a.length-1),b.uniq(e)},b.parseString=function(a){var e,f,b=c("./parser");try{e=new b(a),e.state.push("expression"),f=new d.Expression,f.nodes=e.parse().nodes}catch(b){f=new d.Literal(a)}return f}}),a.register("visitor/index.js",function(a,b,c){var d=a.exports=function(b){this.root=b};d.prototype.visit=function(a,b){var c="visit"+a.constructor.name;return this[c]?this[c](a):a}}),a.register("visitor/compiler.js",function(a,b,c){var d=c("./index"),e=c("../utils"),f=a.exports=function(b,c){c=c||{},this.compress=c.compress,this.firebug=c.firebug,this.linenos=c.linenos,this.spaces=c["indent spaces"]||2,this.indents=1,d.call(this,b),this.stack=[]};f.prototype.__proto__=d.prototype,f.prototype.compile=function(){return this.visit(this.root)},f.prototype.out=function(a,b){return a},f.prototype.__defineGetter__("indent",function(){return this.compress?"":new Array(this.indents).join(Array(this.spaces+1).join(" "))}),f.prototype.needBrackets=function(a){return 1==this.indents||"atrule"!=a.nodeName||a.hasOnlyProperties},f.prototype.visitRoot=function(a){this.buf="";for(var b=0,c=a.nodes.length;b<c;++b){var d=a.nodes[b];(this.linenos||this.firebug)&&this.debugInfo(d);var e=this.visit(d);e&&(this.buf+=this.out(e+"\n",d))}return this.buf},f.prototype.visitBlock=function(a){var b,d,c=this.compress?"":"\n";if(a.hasProperties&&!a.lacksRenderedSelectors){d=this.needBrackets(a.node),d&&(this.buf+=this.out(this.compress?"{":" {\n"),++this.indents);for(var e=0,f=a.nodes.length;e<f;++e)switch(this.last=f-1==e,b=a.nodes[e],b.nodeName){case"null":case"expression":case"function":case"group":case"block":case"unit":case"media":case"keyframes":case"atrule":case"supports":continue;case!this.compress&&b.inline&&"comment":this.buf=this.buf.slice(0,-1),this.buf+=this.out(" "+this.visit(b)+"\n",b);break;case"property":var g=this.visit(b)+c;this.buf+=this.compress?g:this.out(g,b);break;default:this.buf+=this.out(this.visit(b)+c,b)}d&&(--this.indents,this.buf+=this.out(this.indent+"}"+c))}for(var e=0,f=a.nodes.length;e<f;++e)switch(b=a.nodes[e],b.nodeName){case"group":case"block":case"keyframes":(this.linenos||this.firebug)&&this.debugInfo(b),this.visit(b);break;case"media":case"import":case"atrule":case"supports":this.visit(b);break;case"comment":b.suppress||(this.buf+=this.out(this.indent+this.visit(b)+"\n",b));break;case"charset":case"literal":case"namespace":this.buf+=this.out(this.visit(b)+"\n",b)}},f.prototype.visitKeyframes=function(a){if(a.frames){var b="official"==a.prefix?"":"-"+a.prefix+"-";this.buf+=this.out("@"+b+"keyframes "+this.visit(a.val)+(this.compress?"{":" {\n"),a),this.keyframe=!0,++this.indents,this.visit(a.block),--this.indents,this.keyframe=!1,this.buf+=this.out("}"+(this.compress?"":"\n"))}},f.prototype.visitMedia=function(a){var b=a.val;a.hasOutput&&b.nodes.length&&(this.buf+=this.out("@media ",a),this.visit(b),this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(a.block),--this.indents,this.buf+=this.out("}"+(this.compress?"":"\n")))},f.prototype.visitQueryList=function(a){for(var b=0,c=a.nodes.length;b<c;++b)this.visit(a.nodes[b]),c-1!=b&&(this.buf+=this.out(","+(this.compress?"":" ")))},f.prototype.visitQuery=function(a){var b=a.nodes.length;a.predicate&&(this.buf+=this.out(a.predicate+" ")),a.type&&(this.buf+=this.out(a.type+(b?" and ":"")));for(var c=0;c<b;++c)this.buf+=this.out(this.visit(a.nodes[c])),b-1!=c&&(this.buf+=this.out(" and "))},f.prototype.visitFeature=function(a){return a.expr?a.expr.isEmpty?"("+a.name+")":"("+a.name+":"+(this.compress?"":" ")+this.visit(a.expr)+")":a.name},f.prototype.visitImport=function(a){this.buf+=this.out("@import "+this.visit(a.path)+";\n",a)},f.prototype.visitAtrule=function(a){var b=this.compress?"":"\n";this.buf+=this.out(this.indent+"@"+a.type,a),a.val&&(this.buf+=this.out(" "+a.val.trim())),a.block?a.hasOnlyProperties?this.visit(a.block):(this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(a.block),--this.indents,this.buf+=this.out(this.indent+"}"+b)):this.buf+=this.out(";"+b)},f.prototype.visitSupports=function(a){a.hasOutput&&(this.buf+=this.out(this.indent+"@supports ",a),this.isCondition=!0,this.buf+=this.out(this.visit(a.condition)),this.isCondition=!1,this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(a.block),--this.indents,this.buf+=this.out(this.indent+"}"+(this.compress?"":"\n")))},f.prototype.visitComment=function(a){return this.compress&&a.suppress?"":a.str},f.prototype.visitFunction=function(a){return a.name},f.prototype.visitCharset=function(a){return"@charset "+this.visit(a.val)+";"},f.prototype.visitNamespace=function(a){return"@namespace "+(a.prefix?this.visit(a.prefix)+" ":"")+this.visit(a.val)+";"},f.prototype.visitLiteral=function(a){var b=a.val;return a.css&&(b=b.replace(/^  /gm,"")),b},f.prototype.visitBoolean=function(a){return a.toString()},f.prototype.visitRGBA=function(a){return a.toString()},f.prototype.visitHSLA=function(a){return a.rgba.toString()},f.prototype.visitUnit=function(a){var b=a.type||"",c=a.val,d=c!=(0|c);if(this.compress){if("%"!=b&&"s"!=b&&"ms"!=b&&0==c)return"0";if(d&&c<1&&c>-1)return c.toString().replace("0.",".")+b}return(d?parseFloat(c.toFixed(15)):c).toString()+b},f.prototype.visitGroup=function(a){var b=this.keyframe?[]:this.stack,c=this.compress?",":",\n";if(b.push(a.nodes),a.block.hasProperties){var d=e.compileSelectors.call(this,b),f=d.length;if(f){this.keyframe&&(c=this.compress?",":", ");for(var g=0;g<f;++g){var h=d[g],i=g==f-1;this.keyframe&&(h=g?h.trim():h),this.buf+=this.out(h+(i?"":c),a.nodes[g])}}else a.block.lacksRenderedSelectors=!0}this.visit(a.block),b.pop()},f.prototype.visitIdent=function(a){return a.name},f.prototype.visitString=function(a){return this.isURL?a.val:a.toString()},f.prototype.visitNull=function(a){return""},f.prototype.visitCall=function(a){this.isURL="url"==a.name;var b=a.args.nodes.map(function(a){return this.visit(a)},this).join(this.compress?",":", ");return this.isURL&&(b='"'+b+'"'),this.isURL=!1,a.name+"("+b+")"},f.prototype.visitExpression=function(a){var b=[],c=this,d=a.nodes.length,e=a.nodes.map(function(a){return c.visit(a)});return e.forEach(function(f,g){var h=g==d-1;if(b.push(f),"/"!=e[g+1]&&"/"!=f&&!h){var i=c.isURL||c.isCondition&&(")"==e[g+1]||"("==f)?"":" ";b.push(a.isList?c.compress?",":", ":i)}}),b.join("")},f.prototype.visitArguments=f.prototype.visitExpression,f.prototype.visitProperty=function(a){var b=this.visit(a.expr).trim(),c=a.name||a.segments.join(""),d=[];return d.push(this.out(this.indent),this.out(c+(this.compress?":":": "),a),this.out(b,a.expr),this.out(this.compress&&this.last?"":";")),d.join("")},f.prototype.debugInfo=function(a){var b="stdin"==a.filename?"stdin":fs.realpathSync(a.filename),c=(a.nodes&&a.nodes.length?a.nodes[0].lineno:a.lineno)||1;this.linenos&&(this.buf+="\n/* line "+c+" : "+b+" */\n"),this.firebug&&(b="file\\:\\/\\/"+b.replace(/([.:\/\\])/g,function(a){return"\\"+("\\"===a?"/":a)}),c="\\00003"+c,this.buf+="\n@media -stylus-debug-info{filename{font-family:"+b+"}line{font-family:"+c+"}}\n")}}),a.register("visitor/evaluator.js",function(a,b,c){function n(a,b,d){var i,f=this.importStack,g=c("../parser");if(a.once){if(this.requireHistory[b])return e.nil;if(this.requireHistory[b]=!0,d&&!this.includeCSS)return a}if(~f.indexOf(b))throw new Error("import loop has been found");var k=fs.readFileSync(b,"utf8");if(!k.trim())return e.nil;if(a.path=b,a.dirname=j(b),i=fs.statSync(b),a.mtime=i.mtime,this.paths.push(a.dirname),this.options._imports&&this.options._imports.push(a.clone()),f.push(b),e.filename=b,d&&(d=new e.Literal(k.replace(/\r\n?/g,"\n")),d.lineno=d.column=1,!this.resolveURL))return d;var l=new e.Block,m=new g(k,h.merge({root:l},this.options));try{l=m.parse()}catch(a){var n=m.lexer.lineno,o=m.lexer.column;if(d&&this.includeCSS&&this.resolveURL)return this.warn("ParseError: "+b+":"+n+":"+o+". This file included as-is"),d;throw a.filename=b,a.lineno=n,a.column=o,a.input=k,a}l=l.clone(this.currentBlock),l.parent=this.currentBlock,l.scope=!1;var p=this.visit(l);return f.pop(),this.resolveURL&&!this.resolveURL.nocheck||this.paths.pop(),p}var d=c("./index"),e=c("../nodes"),f=c("../stack"),g=c("../stack/frame"),h=c("../utils"),i=c("../functions"),j=c("../path").dirname,k=c("../colors"),l=c("../units"),o=a.exports=function(b,c){c=c||{},d.call(this,b);var e=this.functions=c.functions||{};this.stack=new f,this.imports=c.imports||[],this.globals=c.globals||{},this.paths=c.paths||[],this.prefix=c.prefix||"",this.filename=c.filename,this.includeCSS=c["include css"],this.resolveURL=e.url&&"resolver"==e.url.name&&e.url.options,this.paths.push(j(c.filename||".")),this.stack.push(this.global=new g(b)),this.warnings=c.warn,this.options=c,this.calling=[],this.importStack=[],this.ret=0,this.requireHistory={}};o.prototype.__proto__=d.prototype;var p=d.prototype.visit;o.prototype.visit=function(a){try{return p.call(this,a)}catch(b){if(b.filename)throw b;b.lineno=a.lineno,b.column=a.column,b.filename=a.filename,b.stylusStack=this.stack.toString();try{}catch(a){}throw b}},o.prototype.setup=function(){var a=this.root,b=[];this.populateGlobalScope(),this.imports.forEach(function(a){var c=new e.Expression;c.push(new e.String(a)),b.push(new e.Import(c))},this),a.nodes=b.concat(a.nodes)},o.prototype.populateGlobalScope=function(){var a=this.global.scope;Object.keys(k).forEach(function(b){var c=k[b],d=new e.RGBA(c[0],c[1],c[2],c[3]),f=new e.Ident(b,d);d.name=b,a.add(f)}),a.add(new e.Ident("embedurl",new e.Function("embedurl",c("../functions/url")({limit:!1}))));var b=this.globals;Object.keys(b).forEach(function(c){var d=b[c];d.nodeName||(d=new e.Literal(d)),a.add(new e.Ident(c,d))})},o.prototype.evaluate=function(){return this.setup(),this.visit(this.root)},o.prototype.visitGroup=function(a){return a.nodes=a.nodes.map(function(a){return a.val=this.interpolate(a),a},this),a.block=this.visit(a.block),a},o.prototype.visitReturn=function(a){throw a.expr=this.visit(a.expr),a},o.prototype.visitMedia=function(a){return a.block=this.visit(a.block),a.val=this.visit(a.val),a},o.prototype.visitQueryList=function(a){var b,d;if(a.nodes.forEach(this.visit,this),1==a.nodes.length&&(d=a.nodes[0],b=this.lookup(d.type))){if(b=b.first.string,!b)return a;var e=c("../parser"),f=new e(b,this.options);a=this.visit(f.queries())}return a},o.prototype.visitQuery=function(a){return a.predicate=this.visit(a.predicate),a.type=this.visit(a.type),a.nodes.forEach(this.visit,this),a},o.prototype.visitFeature=function(a){return a.name=this.interpolate(a),a.expr&&(this.ret++,a.expr=this.visit(a.expr),this.ret--),a},o.prototype.visitObject=function(a){for(var b in a.vals)a.vals[b]=this.visit(a.vals[b]);return a},o.prototype.visitMember=function(a){var b=a.left,c=a.right,d=this.visit(b).first;if("object"!=d.nodeName)throw new Error(b.toString()+" has no property ."+c);return a.val&&(this.ret++,d.set(c.name,this.visit(a.val)),this.ret--),d.get(c.name)},o.prototype.visitKeyframes=function(a){var b;return a.fabricated?a:(a.val=this.interpolate(a).trim(),(b=this.lookup(a.val))&&(a.val=b.first.string||b.first.name),a.block=this.visit(a.block),"official"!=a.prefix?a:(this.vendors.forEach(function(b){if("ms"!=b){var c=a.clone();c.val=a.val,c.prefix=b,c.block=a.block,c.fabricated=!0,this.currentBlock.push(c)}},this),e.nil))},o.prototype.visitFunction=function(a){var b=this.stack.currentFrame.scope.lookup(a.name);b&&this.warn("local "+b.nodeName+' "'+a.name+'" previously defined in this scope');var c=this.functions[a.name];c&&this.warn('user-defined function "'+a.name+'" is already defined');var d=i[a.name];return d&&this.warn('built-in function "'+a.name+'" is already defined'),a},o.prototype.visitEach=function(a){function n(b,c){g.add(c),g.add(b),l=k.visit(a.block.clone()),j=j.concat(l.nodes)}this.ret++;var l,m,b=h.unwrap(this.visit(a.expr)),c=b.nodes.length,d=new e.Ident(a.val),f=new e.Ident(a.key||"__index__"),g=this.currentScope,i=this.currentBlock,j=[],k=this;if(this.ret--,a.block.scope=!1,1==c&&"object"==b.nodes[0].nodeName){m=b.nodes[0];for(var o in m.vals)d.val=new e.String(o),f.val=m.get(o),n(f,d)}else for(var p=0;p<c;++p)d.val=b.nodes[p],f.val=new e.Unit(p),n(f,d);return this.mixin(j,i),j[j.length-1]||e.nil},o.prototype.visitCall=function(a){var c,d,b=this.lookup(a.name);if(this.ignoreColors="url"==a.name,b&&"expression"==b.nodeName&&(b=b.nodes[0]),b&&"function"!=b.nodeName&&(b=this.lookupFunction(a.name)),!b||"function"!=b.nodeName)return"calc"==this.unvendorize(a.name)?(c=a.args.nodes&&a.args.nodes[0],c&&(d=new e.Literal(a.name+c))):d=this.literalCall(a),this.ignoreColors=!1,d;if(this.calling.push(a.name),this.calling.length>200)throw new RangeError("Maximum stylus call stack size exceeded");"expression"==b.nodeName&&(b=b.first),this.ret++;var f=this.visit(a.args);for(var g in f.map)f.map[g]=this.visit(f.map[g].clone());return this.ret--,b.fn?d=this.invokeBuiltin(b.fn,f):"function"==b.nodeName&&(a.block&&(a.block=this.visit(a.block)),d=this.invokeFunction(b,f,a.block)),this.calling.pop(),this.ignoreColors=!1,d},o.prototype.visitIdent=function(a){var b;if(a.property)return(b=this.lookupProperty(a.name))?this.visit(b.expr.clone()):e.nil;if(a.val.isNull){var c=this.lookup(a.name);return c&&a.mixin&&this.mixinNode(c),c?this.visit(c):a}return this.ret++,a.val=this.visit(a.val),this.ret--,this.currentScope.add(a),a.val},o.prototype.visitBinOp=function(a){if("is defined"==a.op)return this.isDefined(a.left);this.ret++;var b=a.op,c=this.visit(a.left),d="||"==b||"&&"==b?a.right:this.visit(a.right),f=a.val?this.visit(a.val):null;this.ret--;try{return this.visit(c.operate(b,d,f))}catch(a){if("CoercionError"==a.name)switch(b){case"==":return e.no;case"!=":
return e.yes}throw a}},o.prototype.visitUnaryOp=function(a){var b=a.op,c=this.visit(a.expr);switch("!"!=b&&(c=c.first.clone(),h.assertType(c,"unit")),b){case"-":c.val=-c.val;break;case"+":c.val=+c.val;break;case"~":c.val=~c.val;break;case"!":return c.toBoolean().negate()}return c},o.prototype.visitTernary=function(a){var b=this.visit(a.cond).toBoolean();return b.isTrue?this.visit(a.trueExpr):this.visit(a.falseExpr)},o.prototype.visitExpression=function(a){for(var b=0,c=a.nodes.length;b<c;++b)a.nodes[b]=this.visit(a.nodes[b]);return this.castable(a)&&(a=this.cast(a)),a},o.prototype.visitArguments=o.prototype.visitExpression,o.prototype.visitProperty=function(a){var b=this.interpolate(a),c=this.lookup(b),d=c&&"function"==c.first.nodeName,f=~this.calling.indexOf(b),g=this.property;if(!d||f||a.literal)return this.ret++,a.name=b,a.literal=!0,this.property=a,a.expr=this.visit(a.expr),this.property=g,this.ret--,a;var i=e.Arguments.fromExpression(h.unwrap(a.expr.clone()));a.name=b,this.property=a,this.ret++,this.property.expr=this.visit(a.expr),this.ret--;var j=this.visit(new e.Call(b,i));return this.property=g,j},o.prototype.visitRoot=function(a){if(a!=this.root)return a.constructor=e.Block,this.visit(a);for(var b=0;b<a.nodes.length;++b)a.index=b,a.nodes[b]=this.visit(a.nodes[b]);return a},o.prototype.visitBlock=function(a){for(this.stack.push(new g(a)),a.index=0;a.index<a.nodes.length;++a.index)try{a.nodes[a.index]=this.visit(a.nodes[a.index])}catch(b){if("return"==b.nodeName){if(this.ret)throw this.stack.pop(),b;a.nodes[a.index]=b;break}throw b}return this.stack.pop(),a},o.prototype.visitAtblock=function(a){return a.block=this.visit(a.block),a},o.prototype.visitAtrule=function(a){return a.val=this.interpolate(a),a.block&&(a.block=this.visit(a.block)),a},o.prototype.visitSupports=function(a){var c,b=a.condition;return this.ret++,a.condition=this.visit(b),this.ret--,c=b.first,1==b.nodes.length&&"string"==c.nodeName&&(a.condition=c.string),a.block=this.visit(a.block),a},o.prototype.visitIf=function(a){var b,c=this.currentBlock,d=a.negate;this.ret++;var f=this.visit(a.cond).first.toBoolean();if(this.ret--,a.block.scope=a.block.hasMedia,d)f.isFalse&&(b=this.visit(a.block));else if(f.isTrue)b=this.visit(a.block);else if(a.elses.length)for(var i,g=a.elses,h=g.length,j=0;j<h;++j)if(g[j].cond){if(g[j].block.scope=g[j].block.hasMedia,this.ret++,i=this.visit(g[j].cond).first.toBoolean(),this.ret--,i.isTrue){b=this.visit(g[j].block);break}}else g[j].scope=g[j].hasMedia,b=this.visit(g[j]);return b&&!a.postfix&&c.node&&~["group","atrule","media","supports","keyframes"].indexOf(c.node.nodeName)?(this.mixin(b.nodes,c),e.nil):b||e.nil},o.prototype.visitExtend=function(a){var b=this.currentBlock;return"group"!=b.node.nodeName&&(b=this.closestGroup),a.selectors.forEach(function(a){b.node.extends.push({selector:this.interpolate(a.clone()).trim(),optional:a.optional,lineno:a.lineno,column:a.column})},this),e.nil},o.prototype.visitImport=function(a){this.ret++;var d,f,b=this.visit(a.path).first,c=a.once?"require":"import";if(this.ret--,"url"==b.name){if(a.once)throw new Error("You cannot @require a url");return a}if(!b.string)throw new Error("@"+c+" string expected");var g=b=b.string;if(/(?:url\s*\(\s*)?['"]?(?:#|(?:https?:)?\/\/)/i.test(b)){if(a.once)throw new Error("You cannot @require a url");return a}if(/\.css(?:"|$)/.test(b)&&(f=!0,!a.once&&!this.includeCSS))return a;if(f||/\.styl$/i.test(b)||(b+=".styl"),d=h.find(b,this.paths,this.filename),d||(d=h.lookupIndex(g,this.paths,this.filename)),!d)throw new Error("failed to locate @"+c+" file "+b);for(var i=new e.Block,j=0,k=d.length;j<k;++j)i.push(n.call(this,a,d[j],f));return i},o.prototype.invokeFunction=function(a,b,c){var d=new e.Block(a.block.parent),f=a.block.clone(d),h=this.stack.currentFrame.block;this.stack.push(new g(d));var i=this.currentScope;if("arguments"!=b.nodeName){var j=new e.Expression;j.push(b),b=e.Arguments.fromExpression(j)}if(i.add(new e.Ident("arguments",b)),i.add(new e.Ident("mixin",this.ret?e.no:new e.String(h.nodeName))),this.property){var k=this.propertyExpression(this.property,a.name);i.add(new e.Ident("current-property",k))}else i.add(new e.Ident("current-property",e.nil));for(var j=new e.Expression,l=this.calling.length-1;l--;)j.push(new e.Literal(this.calling[l]));i.add(new e.Ident("called-from",j));var l=0,m=b.nodes.length;return a.params.nodes.forEach(function(c){if(c.rest){for(c.val=new e.Expression;l<m;++l)c.val.push(b.nodes[l]);c.val.preserve=!0,c.val.isList=b.isList}else{var d=b.map[c.name]||b.nodes[l++];if(c=c.clone(),d?d.isEmpty?b.nodes[l-1]=this.visit(c):c.val=d:b.push(c.val),c.val.isNull)throw new Error('argument "'+c+'" required for '+a)}i.add(c)},this),c&&i.add(new e.Ident("block",c,!0)),this.invoke(f,!0,a.filename)},o.prototype.invokeBuiltin=function(a,b){b=a.raw?b.nodes:h.params(a).reduce(function(a,c){var d=b.map[c]||b.nodes.shift();if(d){d=h.unwrap(d);var e=d.nodes.length;if(e>1)for(var f=0;f<e;++f)a.push(h.unwrap(d.nodes[f].first));else a.push(d.first)}return a},[]);var c=h.coerce(a.apply(this,b)),d=new e.Expression;return d.push(c),c=d,this.invoke(c)},o.prototype.invoke=function(a,b,c){var f;return c&&this.paths.push(j(c)),this.ret?(f=this.eval(a.nodes),b&&this.stack.pop()):(a=this.visit(a),b&&this.stack.pop(),this.mixin(a.nodes,this.currentBlock),f=e.nil),c&&this.paths.pop(),f},o.prototype.mixin=function(a,b){if(a.length){var c=b.nodes.length,d=b.nodes.slice(0,b.index),e=b.nodes.slice(b.index+1,c);this._mixin(a,d,b),b.index=0,b.nodes=d.concat(e)}},o.prototype._mixin=function(a,b,c){for(var d,f=a.length,g=0;g<f;++g)switch((d=a[g]).nodeName){case"return":return;case"block":this._mixin(d.nodes,b,c);break;case"media":var i=d.block.parent.node;i&&"call"!=i.nodeName&&(d.block.parent=c);case"property":var j=d.expr;d.literal&&"block"==j.first.name&&(j=h.unwrap(j),j.nodes[0]=new e.Literal("block"));default:b.push(d)}},o.prototype.mixinNode=function(a){switch(a=this.visit(a.first),a.nodeName){case"object":return this.mixinObject(a),e.nil;case"block":case"atblock":return this.mixin(a.nodes,this.currentBlock),e.nil}},o.prototype.mixinObject=function(a){var g,b=c("../parser"),d=this.root,e="$block "+a.toBlock(),f=new b(e,h.merge({root:g},this.options));try{g=f.parse()}catch(a){throw a.filename=this.filename,a.lineno=f.lexer.lineno,a.column=f.lexer.column,a.input=e,a}g.parent=d,g.scope=!1;for(var i=this.visit(g),j=i.first.nodes,k=0,l=j.length;k<l;++k)if(j[k].block){this.mixin(j[k].block.nodes,this.currentBlock);break}},o.prototype.eval=function(a){if(!a)return e.nil;var b=a.length,c=e.nil;try{for(var d=0;d<b;++d)switch(c=a[d],c.nodeName){case"if":if("block"!=c.block.nodeName){c=this.visit(c);break}case"each":case"block":c=this.visit(c),c.nodes&&(c=this.eval(c.nodes));break;default:c=this.visit(c)}}catch(a){if("return"==a.nodeName)return a.expr;throw a}return c},o.prototype.literalCall=function(a){return a.args=this.visit(a.args),a},o.prototype.lookupProperty=function(a){for(var e,f,g,h,b=this.stack.length,c=this.currentBlock.index,d=b;b--;)if(f=this.stack[b].block,f.node)switch(f.node.nodeName){case"group":case"function":case"if":case"each":case"atrule":case"media":case"atblock":case"call":if(e=f.nodes,b+1==d){for(;c--;)if(this.property!=e[c]&&(h=this.interpolate(e[c]),a==h))return e[c].clone()}else for(g=e.length;g--;)if("property"==e[g].nodeName&&this.property!=e[g]&&(h=this.interpolate(e[g]),a==h))return e[g].clone()}return e.nil},o.prototype.__defineGetter__("closestBlock",function(){for(var b,a=this.stack.length;a--;)if(b=this.stack[a].block,b.node)switch(b.node.nodeName){case"group":case"keyframes":case"atrule":case"atblock":case"media":case"call":return b}}),o.prototype.__defineGetter__("closestGroup",function(){for(var b,a=this.stack.length;a--;)if(b=this.stack[a].block,b.node&&"group"==b.node.nodeName)return b}),o.prototype.__defineGetter__("selectorStack",function(){for(var a,b=[],c=0,d=this.stack.length;c<d;++c)a=this.stack[c].block,a.node&&"group"==a.node.nodeName&&(a.node.nodes.forEach(function(a){a.val||(a.val=this.interpolate(a))},this),b.push(a.node.nodes));return b}),o.prototype.lookup=function(a){var b;if(!(this.ignoreColors&&a in k))return(b=this.stack.lookup(a))?h.unwrap(b):this.lookupFunction(a)},o.prototype.interpolate=function(a){function d(a){switch(a.nodeName){case"function":case"ident":return a.name;case"literal":case"string":return!b.prefix||a.prefixed||a.val.nodeName||(a.val=a.val.replace(/\./g,"."+b.prefix),a.prefixed=!0),a.val;case"unit":return"%"==a.type?a.val+"%":a.val;case"member":return d(b.visit(a));case"expression":if(b.calling&&~b.calling.indexOf("selector")&&b._selector)return b._selector;b.ret++;var e=d(b.visit(a).first);return b.ret--,c&&(b._selector=e),e}}var b=this,c="selector"==a.nodeName;return a.segments?a.segments.map(d).join(""):d(a)},o.prototype.lookupFunction=function(a){var b=this.functions[a]||i[a];if(b)return new e.Function(a,b)},o.prototype.isDefined=function(a){if("ident"==a.nodeName)return e.Boolean(this.lookup(a.name));throw new Error('invalid "is defined" check on non-variable '+a)},o.prototype.propertyExpression=function(a,b){function f(a){return"call"==a.nodeName&&b==a.name?new e.Literal("__CALL__"):(a.nodes&&(a.nodes=a.nodes.map(f)),a)}var c=new e.Expression,d=a.expr.clone();return c.push(new e.String(a.name)),f(d),c.push(d),c},o.prototype.cast=function(a){return new e.Unit(a.first.val,a.nodes[1].name)},o.prototype.castable=function(a){return 2==a.nodes.length&&"unit"==a.first.nodeName&&~l.indexOf(a.nodes[1].name)},o.prototype.warn=function(a){this.warnings&&console.warn("[33mWarning:[0m "+a)},o.prototype.__defineGetter__("currentBlock",function(){return this.stack.currentFrame.block}),o.prototype.__defineGetter__("vendors",function(){return this.lookup("vendors").nodes.map(function(a){return a.string})}),o.prototype.unvendorize=function(a){for(var b=0,c=this.vendors.length;b<c;b++)if("official"!=this.vendors[b]){var d="-"+this.vendors[b]+"-";if(~a.indexOf(d))return a.replace(d,"")}return a},o.prototype.__defineGetter__("currentScope",function(){return this.stack.currentFrame.scope}),o.prototype.__defineGetter__("currentFrame",function(){return this.stack.currentFrame})}),a.register("visitor/normalizer.js",function(a,b,c){var d=c("./index"),e=c("../nodes/index"),f=c("../utils"),g=a.exports=function(b,c){c=c||{},d.call(this,b),this.hoist=c["hoist atrules"],this.stack=[],this.map={},this.imports=[]};g.prototype.__proto__=d.prototype,g.prototype.normalize=function(){var a=this.visit(this.root);return this.hoist&&(this.imports.length&&(a.nodes=this.imports.concat(a.nodes)),this.charset&&(a.nodes=[this.charset].concat(a.nodes))),a},g.prototype.bubble=function(a){function f(a){a.nodes.forEach(function(a){switch(a=d.visit(a),a.nodeName){case"property":b.push(a);break;case"block":f(a);break;default:c.push(a)}})}var b=[],c=[],d=this;if(f(a.block),b.length){var g=new e.Selector([new e.Literal("&")]);g.lineno=a.lineno,g.column=a.column,g.filename=a.filename,g.val="&";var h=new e.Group;h.lineno=a.lineno,h.column=a.column,h.filename=a.filename;var i=new e.Block(a.block,h);i.lineno=a.lineno,i.column=a.column,i.filename=a.filename,b.forEach(function(a){i.push(a)}),h.push(g),h.block=i,a.block.nodes=[],a.block.push(h),c.forEach(function(b){a.block.push(b)});var h=this.closestGroup(a.block);h&&(a.group=h.clone()),a.bubbled=!0}},g.prototype.closestGroup=function(a){for(var c,b=a.parent;b&&(c=b.node);){if("group"==c.nodeName)return c;b=c.block&&c.block.parent}},g.prototype.visitRoot=function(a){for(var c,b=new e.Root,d=0;d<a.nodes.length;++d)switch(c=a.nodes[d],c.nodeName){case"null":case"expression":case"function":case"unit":case"atblock":continue;default:this.rootIndex=d,b.push(this.visit(c))}return b},g.prototype.visitProperty=function(a){return this.visit(a.expr),a},g.prototype.visitExpression=function(a){return a.nodes=a.nodes.map(function(b){if("block"==b.nodeName){var c=new e.Literal("block");return c.lineno=a.lineno,c.column=a.column,c}return b}),a},g.prototype.visitBlock=function(a){var b;if(a.hasProperties)for(var c=0,d=a.nodes.length;c<d;++c)switch(b=a.nodes[c],b.nodeName){case"null":case"expression":case"function":case"group":case"unit":case"atblock":continue;default:a.nodes[c]=this.visit(b)}for(var c=0,d=a.nodes.length;c<d;++c)b=a.nodes[c],a.nodes[c]=this.visit(b);return a},g.prototype.visitGroup=function(a){var d,b=this.stack,c=this.map;a.nodes.forEach(function(b,c){if(~b.val.indexOf(",")){if(~b.val.indexOf("\\,"))return void(b.val=b.val.replace(/\\,/g,","));d=b.val.split(",");for(var g,h,f="/"==b.val.charAt(0),i=0,j=d.length;i<j;++i)g=d[i].trim(),f&&i>0&&!~g.indexOf("&")&&(g="/"+g),h=new e.Selector([new e.Literal(g)]),h.val=g,h.block=a.block,a.nodes[c++]=h}}),b.push(a.nodes);var g=f.compileSelectors(b,!0);return g.forEach(function(b){c[b]=c[b]||[],c[b].push(a)}),this.extend(a,g),b.pop(),a},g.prototype.visitFunction=function(){return e.nil},g.prototype.visitMedia=function(a){function f(c){c.nodes.forEach(function(d,g){switch(d.nodeName){case"media":d.val=a.val.merge(d.val),b.push(d),c.nodes[g]=e.nil;break;case"block":f(d);break;default:d.block&&d.block.nodes&&f(d.block)}})}var d,b=[],c=this.closestGroup(a.block);return f(a.block),this.bubble(a),b.length&&b.forEach(function(a){c?c.block.push(a):this.root.nodes.splice(++this.rootIndex,0,a),a=this.visit(a),d=a.block.parent,!a.bubbled||c&&"group"!=d.node.nodeName||(a.group.block=a.block.nodes[0].block,a.block.nodes[0]=a.group)},this),a},g.prototype.visitSupports=function(a){return this.bubble(a),a},g.prototype.visitAtrule=function(a){return a.block&&(a.block=this.visit(a.block)),a},g.prototype.visitKeyframes=function(a){var b=a.block.nodes.filter(function(a){return a.block&&a.block.hasProperties});return a.frames=b.length,a},g.prototype.visitImport=function(a){return this.imports.push(a),this.hoist?e.nil:a},g.prototype.visitCharset=function(a){return this.charset=a,this.hoist?e.nil:a},g.prototype.extend=function(a,b){var c=this.map,d=this,f=this.closestGroup(a.block);a.extends.forEach(function(a){var g=c[a.selector];if(!g){if(a.optional)return;var h=new Error('Failed to @extend "'+a.selector+'"');throw h.lineno=a.lineno,h.column=a.column,h}b.forEach(function(a){var c=new e.Selector;c.val=a,c.inherits=!1,g.forEach(function(a){f&&f==a||d.extend(a,b),a.push(c)})})}),a.block=this.visit(a.block)}}),a("stylus")}();